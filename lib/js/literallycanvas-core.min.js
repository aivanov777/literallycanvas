!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.LC=t()}}(function(){var t;return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,n,r){(function(e){(function(){function i(t,e){return t.set(e[0],e[1]),t}function o(t,e){return t.add(e),t}function a(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function s(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function u(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function h(t,e){for(var n=null==t?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}function c(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function l(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function f(t,e){var n=null==t?0:t.length;return!!n&&b(t,e,0)>-1}function p(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function d(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function g(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function y(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function v(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function m(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function _(t){return t.split("")}function S(t){return t.match(Je)||[]}function x(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function w(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function b(t,e,n){return e===e?Y(t,e,n):w(t,C,n)}function k(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function C(t){return t!==t}function P(t,e){var n=null==t?0:t.length;return n?z(t,e)/n:Mt}function R(t){return function(e){return null==e?rt:e[t]}}function E(t){return function(e){return null==t?rt:t[e]}}function T(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function I(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function z(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==rt&&(n=n===rt?o:n+o)}return n}function L(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function W(t,e){return d(e,function(e){return[e,t[e]]})}function O(t){return function(e){return t(e)}}function A(t,e){return d(e,function(e){return t[e]})}function M(t,e){return t.has(e)}function B(t,e){for(var n=-1,r=t.length;++n<r&&b(e,t[n],0)>-1;);return n}function D(t,e){for(var n=t.length;n--&&b(e,t[n],0)>-1;);return n}function N(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function j(t){return"\\"+er[t]}function U(t,e){return null==t?rt:t[e]}function J(t){return Gn.test(t)}function F(t){return qn.test(t)}function H(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function V(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function G(t,e){return function(n){return t(e(n))}}function q(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==ct||(t[n]=ct,o[i++]=n)}return o}function $(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Z(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Y(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function K(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function X(t){return J(t)?tt(t):mr(t)}function Q(t){return J(t)?et(t):_(t)}function tt(t){for(var e=Hn.lastIndex=0;Hn.test(t);)++e;return e}function et(t){return t.match(Hn)||[]}function nt(t){return t.match(Vn)||[]}var rt,it="4.17.4",ot=200,at="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",st="Expected a function",ut="__lodash_hash_undefined__",ht=500,ct="__lodash_placeholder__",lt=1,ft=2,pt=4,dt=1,gt=2,yt=1,vt=2,mt=4,_t=8,St=16,xt=32,wt=64,bt=128,kt=256,Ct=512,Pt=30,Rt="...",Et=800,Tt=16,It=1,zt=2,Lt=3,Wt=1/0,Ot=9007199254740991,At=1.7976931348623157e308,Mt=NaN,Bt=4294967295,Dt=Bt-1,Nt=Bt>>>1,jt=[["ary",bt],["bind",yt],["bindKey",vt],["curry",_t],["curryRight",St],["flip",Ct],["partial",xt],["partialRight",wt],["rearg",kt]],Ut="[object Arguments]",Jt="[object Array]",Ft="[object AsyncFunction]",Ht="[object Boolean]",Vt="[object Date]",Gt="[object DOMException]",qt="[object Error]",$t="[object Function]",Zt="[object GeneratorFunction]",Yt="[object Map]",Kt="[object Number]",Xt="[object Null]",Qt="[object Object]",te="[object Promise]",ee="[object Proxy]",ne="[object RegExp]",re="[object Set]",ie="[object String]",oe="[object Symbol]",ae="[object Undefined]",se="[object WeakMap]",ue="[object WeakSet]",he="[object ArrayBuffer]",ce="[object DataView]",le="[object Float32Array]",fe="[object Float64Array]",pe="[object Int8Array]",de="[object Int16Array]",ge="[object Int32Array]",ye="[object Uint8Array]",ve="[object Uint8ClampedArray]",me="[object Uint16Array]",_e="[object Uint32Array]",Se=/\b__p \+= '';/g,xe=/\b(__p \+=) '' \+/g,we=/(__e\(.*?\)|\b__t\)) \+\n'';/g,be=/&(?:amp|lt|gt|quot|#39);/g,ke=/[&<>"']/g,Ce=RegExp(be.source),Pe=RegExp(ke.source),Re=/<%-([\s\S]+?)%>/g,Ee=/<%([\s\S]+?)%>/g,Te=/<%=([\s\S]+?)%>/g,Ie=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ze=/^\w*$/,Le=/^\./,We=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oe=/[\\^$.*+?()[\]{}|]/g,Ae=RegExp(Oe.source),Me=/^\s+|\s+$/g,Be=/^\s+/,De=/\s+$/,Ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,je=/\{\n\/\* \[wrapped with (.+)\] \*/,Ue=/,? & /,Je=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fe=/\\(\\)?/g,He=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ve=/\w*$/,Ge=/^[-+]0x[0-9a-f]+$/i,qe=/^0b[01]+$/i,$e=/^\[object .+?Constructor\]$/,Ze=/^0o[0-7]+$/i,Ye=/^(?:0|[1-9]\d*)$/,Ke=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xe=/($^)/,Qe=/['\n\r\u2028\u2029\\]/g,tn="\\ud800-\\udfff",en="\\u0300-\\u036f",nn="\\ufe20-\\ufe2f",rn="\\u20d0-\\u20ff",on=en+nn+rn,an="\\u2700-\\u27bf",sn="a-z\\xdf-\\xf6\\xf8-\\xff",un="\\xac\\xb1\\xd7\\xf7",hn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",cn="\\u2000-\\u206f",ln=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fn="A-Z\\xc0-\\xd6\\xd8-\\xde",pn="\\ufe0e\\ufe0f",dn=un+hn+cn+ln,gn="['’]",yn="["+tn+"]",vn="["+dn+"]",mn="["+on+"]",_n="\\d+",Sn="["+an+"]",xn="["+sn+"]",wn="[^"+tn+dn+_n+an+sn+fn+"]",bn="\\ud83c[\\udffb-\\udfff]",kn="(?:"+mn+"|"+bn+")",Cn="[^"+tn+"]",Pn="(?:\\ud83c[\\udde6-\\uddff]){2}",Rn="[\\ud800-\\udbff][\\udc00-\\udfff]",En="["+fn+"]",Tn="\\u200d",In="(?:"+xn+"|"+wn+")",zn="(?:"+En+"|"+wn+")",Ln="(?:"+gn+"(?:d|ll|m|re|s|t|ve))?",Wn="(?:"+gn+"(?:D|LL|M|RE|S|T|VE))?",On=kn+"?",An="["+pn+"]?",Mn="(?:"+Tn+"(?:"+[Cn,Pn,Rn].join("|")+")"+An+On+")*",Bn="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Dn="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Nn=An+On+Mn,jn="(?:"+[Sn,Pn,Rn].join("|")+")"+Nn,Un="(?:"+[Cn+mn+"?",mn,Pn,Rn,yn].join("|")+")",Jn=RegExp(gn,"g"),Fn=RegExp(mn,"g"),Hn=RegExp(bn+"(?="+bn+")|"+Un+Nn,"g"),Vn=RegExp([En+"?"+xn+"+"+Ln+"(?="+[vn,En,"$"].join("|")+")",zn+"+"+Wn+"(?="+[vn,En+In,"$"].join("|")+")",En+"?"+In+"+"+Ln,En+"+"+Wn,Dn,Bn,_n,jn].join("|"),"g"),Gn=RegExp("["+Tn+tn+on+pn+"]"),qn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$n=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zn=-1,Yn={};Yn[le]=Yn[fe]=Yn[pe]=Yn[de]=Yn[ge]=Yn[ye]=Yn[ve]=Yn[me]=Yn[_e]=!0,Yn[Ut]=Yn[Jt]=Yn[he]=Yn[Ht]=Yn[ce]=Yn[Vt]=Yn[qt]=Yn[$t]=Yn[Yt]=Yn[Kt]=Yn[Qt]=Yn[ne]=Yn[re]=Yn[ie]=Yn[se]=!1;var Kn={};Kn[Ut]=Kn[Jt]=Kn[he]=Kn[ce]=Kn[Ht]=Kn[Vt]=Kn[le]=Kn[fe]=Kn[pe]=Kn[de]=Kn[ge]=Kn[Yt]=Kn[Kt]=Kn[Qt]=Kn[ne]=Kn[re]=Kn[ie]=Kn[oe]=Kn[ye]=Kn[ve]=Kn[me]=Kn[_e]=!0,Kn[qt]=Kn[$t]=Kn[se]=!1;var Xn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Qn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},er={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nr=parseFloat,rr=parseInt,ir="object"==typeof e&&e&&e.Object===Object&&e,or="object"==typeof self&&self&&self.Object===Object&&self,ar=ir||or||Function("return this")(),sr="object"==typeof r&&r&&!r.nodeType&&r,ur=sr&&"object"==typeof n&&n&&!n.nodeType&&n,hr=ur&&ur.exports===sr,cr=hr&&ir.process,lr=function(){try{return cr&&cr.binding&&cr.binding("util")}catch(t){}}(),fr=lr&&lr.isArrayBuffer,pr=lr&&lr.isDate,dr=lr&&lr.isMap,gr=lr&&lr.isRegExp,yr=lr&&lr.isSet,vr=lr&&lr.isTypedArray,mr=R("length"),_r=E(Xn),Sr=E(Qn),xr=E(tr),wr=function kr(t){function e(t){if(hu(t)&&!xf(t)&&!(t instanceof _)){if(t instanceof r)return t;if(Sc.call(t,"__wrapped__"))return aa(t)}return new r(t)}function n(){}function r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=rt}function _(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Bt,this.__views__=[]}function E(){var t=new _(this.__wrapped__);return t.__actions__=ji(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ji(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ji(this.__views__),t}function Y(){if(this.__filtered__){var t=new _(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function tt(){var t=this.__wrapped__.value(),e=this.__dir__,n=xf(t),r=e<0,i=n?t.length:0,o=Io(0,i,this.__views__),a=o.start,s=o.end,u=s-a,h=r?s:a-1,c=this.__iteratees__,l=c.length,f=0,p=Yc(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return xi(t,this.__actions__);var d=[];t:for(;u--&&f<p;){h+=e;for(var g=-1,y=t[h];++g<l;){var v=c[g],m=v.iteratee,_=v.type,S=m(y);if(_==zt)y=S;else if(!S){if(_==It)continue t;break t}}d[f++]=y}return d}function et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Je(){this.__data__=al?al(null):{},this.size=0}function tn(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function en(t){var e=this.__data__;if(al){var n=e[t];return n===ut?rt:n}return Sc.call(e,t)?e[t]:rt}function nn(t){var e=this.__data__;return al?e[t]!==rt:Sc.call(e,t)}function rn(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=al&&e===rt?ut:e,this}function on(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function an(){this.__data__=[],this.size=0}function sn(t){var e=this.__data__,n=Ln(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Oc.call(e,n,1),--this.size,!0}function un(t){var e=this.__data__,n=Ln(e,t);return n<0?rt:e[n][1]}function hn(t){return Ln(this.__data__,t)>-1}function cn(t,e){var n=this.__data__,r=Ln(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function ln(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function fn(){this.size=0,this.__data__={hash:new et,map:new(nl||on),string:new et}}function pn(t){var e=Po(this,t)["delete"](t);return this.size-=e?1:0,e}function dn(t){return Po(this,t).get(t)}function gn(t){return Po(this,t).has(t)}function yn(t,e){var n=Po(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function vn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ln;++e<n;)this.add(t[e])}function mn(t){return this.__data__.set(t,ut),this}function _n(t){return this.__data__.has(t)}function Sn(t){var e=this.__data__=new on(t);this.size=e.size}function xn(){this.__data__=new on,this.size=0}function wn(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function bn(t){return this.__data__.get(t)}function kn(t){return this.__data__.has(t)}function Cn(t,e){var n=this.__data__;if(n instanceof on){var r=n.__data__;if(!nl||r.length<ot-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ln(r)}return n.set(t,e),this.size=n.size,this}function Pn(t,e){var n=xf(t),r=!n&&Sf(t),i=!n&&!r&&bf(t),o=!n&&!r&&!i&&Ef(t),a=n||r||i||o,s=a?L(t.length,pc):[],u=s.length;for(var h in t)!e&&!Sc.call(t,h)||a&&("length"==h||i&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Do(h,u))||s.push(h);return s}function Rn(t){var e=t.length;return e?t[ni(0,e-1)]:rt}function En(t,e){return na(ji(t),Dn(e,0,t.length))}function Tn(t){return na(ji(t))}function In(t,e,n){(n===rt||Zs(t[e],n))&&(n!==rt||e in t)||Mn(t,e,n)}function zn(t,e,n){var r=t[e];Sc.call(t,e)&&Zs(r,n)&&(n!==rt||e in t)||Mn(t,e,n)}function Ln(t,e){for(var n=t.length;n--;)if(Zs(t[n][0],e))return n;return-1}function Wn(t,e,n,r){return ml(t,function(t,i,o){e(r,t,n(t),o)}),r}function On(t,e){return t&&Ui(e,Hu(e),t)}function An(t,e){return t&&Ui(e,Vu(e),t)}function Mn(t,e,n){"__proto__"==e&&Dc?Dc(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Bn(t,e){for(var n=-1,r=e.length,i=ac(r),o=null==t;++n<r;)i[n]=o?rt:Uu(t,e[n]);return i}function Dn(t,e,n){return t===t&&(n!==rt&&(t=t<=n?t:n),e!==rt&&(t=t>=e?t:e)),t}function Nn(t,e,n,r,i,o){var a,s=e&lt,h=e&ft,c=e&pt;if(n&&(a=i?n(t,r,i,o):n(t)),a!==rt)return a;if(!uu(t))return t;var l=xf(t);if(l){if(a=Wo(t),!s)return ji(t,a)}else{var f=Il(t),p=f==$t||f==Zt;if(bf(t))return Ei(t,s);if(f==Qt||f==Ut||p&&!i){if(a=h||p?{}:Oo(t),!s)return h?Fi(t,An(a,t)):Ji(t,On(a,t))}else{if(!Kn[f])return i?t:{};a=Ao(t,f,Nn,s)}}o||(o=new Sn);var d=o.get(t);if(d)return d;o.set(t,a);var g=c?h?wo:xo:h?Vu:Hu,y=l?rt:g(t);return u(y||t,function(r,i){y&&(i=r,r=t[i]),zn(a,i,Nn(r,e,n,i,t,o))}),a}function jn(t){var e=Hu(t);return function(n){return Un(n,t,e)}}function Un(t,e,n){var r=n.length;if(null==t)return!r;for(t=lc(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===rt&&!(i in t)||!o(a))return!1}return!0}function Hn(t,e,n){if("function"!=typeof t)throw new dc(st);return Wl(function(){t.apply(rt,n)},e)}function Vn(t,e,n,r){var i=-1,o=f,a=!0,s=t.length,u=[],h=e.length;if(!s)return u;n&&(e=d(e,O(n))),r?(o=p,a=!1):e.length>=ot&&(o=M,a=!1,e=new vn(e));t:for(;++i<s;){var c=t[i],l=null==n?c:n(c);if(c=r||0!==c?c:0,a&&l===l){for(var g=h;g--;)if(e[g]===l)continue t;u.push(c)}else o(e,l,r)||u.push(c)}return u}function Gn(t,e){var n=!0;return ml(t,function(t,r,i){return n=!!e(t,r,i)}),n}function qn(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===rt?a===a&&!Su(a):n(a,s)))var s=a,u=o}return u}function Xn(t,e,n,r){var i=t.length;for(n=Pu(n),n<0&&(n=-n>i?0:i+n),r=r===rt||r>i?i:Pu(r),r<0&&(r+=i),r=n>r?0:Ru(r);n<r;)t[n++]=e;return t}function Qn(t,e){var n=[];return ml(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function tr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Bo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?tr(s,e-1,n,r,i):g(i,s):r||(i[i.length]=s)}return i}function er(t,e){return t&&Sl(t,e,Hu)}function ir(t,e){return t&&xl(t,e,Hu)}function or(t,e){return l(e,function(e){return ou(t[e])})}function sr(t,e){e=Pi(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[ra(e[n++])];return n&&n==r?t:rt}function ur(t,e,n){var r=e(t);return xf(t)?r:g(r,n(t))}function cr(t){return null==t?t===rt?ae:Xt:Bc&&Bc in lc(t)?To(t):Yo(t)}function lr(t,e){return t>e}function mr(t,e){return null!=t&&Sc.call(t,e)}function wr(t,e){return null!=t&&e in lc(t)}function Cr(t,e,n){return t>=Yc(e,n)&&t<Zc(e,n)}function Pr(t,e,n){for(var r=n?p:f,i=t[0].length,o=t.length,a=o,s=ac(o),u=1/0,h=[];a--;){var c=t[a];a&&e&&(c=d(c,O(e))),u=Yc(c.length,u),s[a]=!n&&(e||i>=120&&c.length>=120)?new vn(a&&c):rt}c=t[0];var l=-1,g=s[0];t:for(;++l<i&&h.length<u;){var y=c[l],v=e?e(y):y;if(y=n||0!==y?y:0,!(g?M(g,v):r(h,v,n))){for(a=o;--a;){var m=s[a];if(!(m?M(m,v):r(t[a],v,n)))continue t}g&&g.push(v),h.push(y)}}return h}function Rr(t,e,n,r){return er(t,function(t,i,o){e(r,n(t),i,o)}),r}function Er(t,e,n){e=Pi(e,t),t=Xo(t,e);var r=null==t?t:t[ra(Ca(e))];return null==r?rt:a(r,t,n)}function Tr(t){return hu(t)&&cr(t)==Ut}function Ir(t){return hu(t)&&cr(t)==he}function zr(t){return hu(t)&&cr(t)==Vt}function Lr(t,e,n,r,i){return t===e||(null==t||null==e||!hu(t)&&!hu(e)?t!==t&&e!==e:Wr(t,e,n,r,Lr,i))}function Wr(t,e,n,r,i,o){var a=xf(t),s=xf(e),u=a?Jt:Il(t),h=s?Jt:Il(e);u=u==Ut?Qt:u,h=h==Ut?Qt:h;var c=u==Qt,l=h==Qt,f=u==h;if(f&&bf(t)){if(!bf(e))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new Sn),a||Ef(t)?vo(t,e,n,r,i,o):mo(t,e,u,n,r,i,o);if(!(n&dt)){var p=c&&Sc.call(t,"__wrapped__"),d=l&&Sc.call(e,"__wrapped__");if(p||d){var g=p?t.value():t,y=d?e.value():e;return o||(o=new Sn),i(g,y,n,r,o)}}return!!f&&(o||(o=new Sn),_o(t,e,n,r,i,o))}function Or(t){return hu(t)&&Il(t)==Yt}function Ar(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=lc(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var u=s[0],h=t[u],c=s[1];if(a&&s[2]){if(h===rt&&!(u in t))return!1}else{var l=new Sn;if(r)var f=r(h,c,u,t,e,l);if(!(f===rt?Lr(c,h,dt|gt,r,l):f))return!1}}return!0}function Mr(t){if(!uu(t)||Fo(t))return!1;var e=ou(t)?Pc:$e;return e.test(ia(t))}function Br(t){return hu(t)&&cr(t)==ne}function Dr(t){return hu(t)&&Il(t)==re}function Nr(t){return hu(t)&&su(t.length)&&!!Yn[cr(t)]}function jr(t){return"function"==typeof t?t:null==t?Oh:"object"==typeof t?xf(t)?Gr(t[0],t[1]):Vr(t):Jh(t)}function Ur(t){if(!Ho(t))return $c(t);var e=[];for(var n in lc(t))Sc.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Jr(t){if(!uu(t))return Zo(t);var e=Ho(t),n=[];for(var r in t)("constructor"!=r||!e&&Sc.call(t,r))&&n.push(r);return n}function Fr(t,e){return t<e}function Hr(t,e){var n=-1,r=Ys(t)?ac(t.length):[];return ml(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Vr(t){var e=Ro(t);return 1==e.length&&e[0][2]?Go(e[0][0],e[0][1]):function(n){return n===t||Ar(n,t,e)}}function Gr(t,e){return jo(t)&&Vo(e)?Go(ra(t),e):function(n){var r=Uu(n,t);return r===rt&&r===e?Fu(n,t):Lr(e,r,dt|gt)}}function qr(t,e,n,r,i){t!==e&&Sl(e,function(o,a){if(uu(o))i||(i=new Sn),$r(t,e,a,n,qr,r,i);else{var s=r?r(t[a],o,a+"",t,e,i):rt;s===rt&&(s=o),In(t,a,s)}},Vu)}function $r(t,e,n,r,i,o,a){var s=t[n],u=e[n],h=a.get(u);if(h)return void In(t,n,h);var c=o?o(s,u,n+"",t,e,a):rt,l=c===rt;if(l){var f=xf(u),p=!f&&bf(u),d=!f&&!p&&Ef(u);c=u,f||p||d?xf(s)?c=s:Ks(s)?c=ji(s):p?(l=!1,c=Ei(u,!0)):d?(l=!1,c=Ai(u,!0)):c=[]:vu(u)||Sf(u)?(c=s,Sf(s)?c=Tu(s):(!uu(s)||r&&ou(s))&&(c=Oo(u))):l=!1}l&&(a.set(u,c),i(c,u,r,o,a),a["delete"](u)),In(t,n,c)}function Zr(t,e){var n=t.length;if(n)return e+=e<0?n:0,Do(e,n)?t[e]:rt}function Yr(t,e,n){var r=-1;e=d(e.length?e:[Oh],O(Co()));var i=Hr(t,function(t,n,i){var o=d(e,function(e){return e(t)});return{criteria:o,index:++r,value:t}});return I(i,function(t,e){return Bi(t,e,n)})}function Kr(t,e){return Xr(t,e,function(e,n){return Fu(t,n)})}function Xr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=sr(t,a);n(s,a)&&ui(o,Pi(a,t),s)}return o}function Qr(t){return function(e){return sr(e,t)}}function ti(t,e,n,r){var i=r?k:b,o=-1,a=e.length,s=t;for(t===e&&(e=ji(e)),n&&(s=d(t,O(n)));++o<a;)for(var u=0,h=e[o],c=n?n(h):h;(u=i(s,c,u,r))>-1;)s!==t&&Oc.call(s,u,1),Oc.call(t,u,1);return t}function ei(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Do(i)?Oc.call(t,i,1):mi(t,i)}}return t}function ni(t,e){return t+Fc(Qc()*(e-t+1))}function ri(t,e,n,r){for(var i=-1,o=Zc(Jc((e-t)/(n||1)),0),a=ac(o);o--;)a[r?o:++i]=t,t+=n;return a}function ii(t,e){var n="";if(!t||e<1||e>Ot)return n;do e%2&&(n+=t),e=Fc(e/2),e&&(t+=t);while(e);return n}function oi(t,e){return Ol(Ko(t,e,Oh),t+"")}function ai(t){return Rn(rh(t))}function si(t,e){var n=rh(t);return na(n,Dn(e,0,n.length))}function ui(t,e,n,r){if(!uu(t))return t;e=Pi(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=ra(e[i]),h=n;if(i!=a){var c=s[u];h=r?r(c,u,s):rt,h===rt&&(h=uu(c)?c:Do(e[i+1])?[]:{})}zn(s,u,h),s=s[u]}return t}function hi(t){return na(rh(t))}function ci(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=ac(i);++r<i;)o[r]=t[r+e];return o}function li(t,e){var n;return ml(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function fi(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=Nt){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!Su(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return pi(t,e,Oh,n)}function pi(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!==e,s=null===e,u=Su(e),h=e===rt;i<o;){var c=Fc((i+o)/2),l=n(t[c]),f=l!==rt,p=null===l,d=l===l,g=Su(l);if(a)var y=r||d;else y=h?d&&(r||f):s?d&&f&&(r||!p):u?d&&f&&!p&&(r||!g):!p&&!g&&(r?l<=e:l<e);y?i=c+1:o=c}return Yc(o,Dt)}function di(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Zs(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function gi(t){return"number"==typeof t?t:Su(t)?Mt:+t}function yi(t){if("string"==typeof t)return t;if(xf(t))return d(t,yi)+"";if(Su(t))return yl?yl.call(t):"";var e=t+"";return"0"==e&&1/t==-Wt?"-0":e}function vi(t,e,n){var r=-1,i=f,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=p;else if(o>=ot){var h=e?null:Pl(t);if(h)return $(h);a=!1,i=M,u=new vn}else u=e?[]:s;t:for(;++r<o;){var c=t[r],l=e?e(c):c;if(c=n||0!==c?c:0,a&&l===l){for(var d=u.length;d--;)if(u[d]===l)continue t;e&&u.push(l),s.push(c)}else i(u,l,n)||(u!==s&&u.push(l),s.push(c))}return s}function mi(t,e){return e=Pi(e,t),t=Xo(t,e),null==t||delete t[ra(Ca(e))]}function _i(t,e,n,r){return ui(t,e,n(sr(t,e)),r)}function Si(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ci(t,r?0:o,r?o+1:i):ci(t,r?o+1:0,r?i:o)}function xi(t,e){var n=t;return n instanceof _&&(n=n.value()),y(e,function(t,e){return e.func.apply(e.thisArg,g([t],e.args))},n)}function wi(t,e,n){var r=t.length;if(r<2)return r?vi(t[0]):[];for(var i=-1,o=ac(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=Vn(o[i]||a,t[s],e,n));return vi(tr(o,1),e,n)}function bi(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:rt;n(a,t[r],s)}return a}function ki(t){return Ks(t)?t:[]}function Ci(t){return"function"==typeof t?t:Oh}function Pi(t,e){return xf(t)?t:jo(t,e)?[t]:Al(zu(t))}function Ri(t,e,n){var r=t.length;return n=n===rt?r:n,!e&&n>=r?t:ci(t,e,n)}function Ei(t,e){if(e)return t.slice();var n=t.length,r=Ic?Ic(n):new t.constructor(n);return t.copy(r),r}function Ti(t){var e=new t.constructor(t.byteLength);return new Tc(e).set(new Tc(t)),e}function Ii(t,e){var n=e?Ti(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function zi(t,e,n){var r=e?n(V(t),lt):V(t);return y(r,i,new t.constructor)}function Li(t){var e=new t.constructor(t.source,Ve.exec(t));return e.lastIndex=t.lastIndex,e}function Wi(t,e,n){var r=e?n($(t),lt):$(t);return y(r,o,new t.constructor)}function Oi(t){return gl?lc(gl.call(t)):{}}function Ai(t,e){var n=e?Ti(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Mi(t,e){if(t!==e){var n=t!==rt,r=null===t,i=t===t,o=Su(t),a=e!==rt,s=null===e,u=e===e,h=Su(e);if(!s&&!h&&!o&&t>e||o&&a&&u&&!s&&!h||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!h&&t<e||h&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function Bi(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Mi(i[r],o[r]);if(u){if(r>=s)return u;var h=n[r];return u*("desc"==h?-1:1)}}return t.index-e.index}function Di(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,h=Zc(o-a,0),c=ac(u+h),l=!r;++s<u;)c[s]=e[s];for(;++i<a;)(l||i<o)&&(c[n[i]]=t[i]);for(;h--;)c[s++]=t[i++];return c}function Ni(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,h=e.length,c=Zc(o-s,0),l=ac(c+h),f=!r;++i<c;)l[i]=t[i];for(var p=i;++u<h;)l[p+u]=e[u];for(;++a<s;)(f||i<o)&&(l[p+n[a]]=t[i++]);return l}function ji(t,e){var n=-1,r=t.length;for(e||(e=ac(r));++n<r;)e[n]=t[n];return e}function Ui(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):rt;u===rt&&(u=t[s]),i?Mn(n,s,u):zn(n,s,u)}return n}function Ji(t,e){return Ui(t,El(t),e)}function Fi(t,e){return Ui(t,Tl(t),e)}function Hi(t,e){return function(n,r){var i=xf(n)?s:Wn,o=e?e():{};return i(n,t,Co(r,2),o)}}function Vi(t){return oi(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:rt,a=i>2?n[2]:rt;for(o=t.length>3&&"function"==typeof o?(i--,o):rt,a&&No(n[0],n[1],a)&&(o=i<3?rt:o,i=1),e=lc(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Gi(t,e){return function(n,r){if(null==n)return n;if(!Ys(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=lc(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function qi(t){return function(e,n,r){for(var i=-1,o=lc(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(n(o[u],u,o)===!1)break}return e}}function $i(t,e,n){function r(){var e=this&&this!==ar&&this instanceof r?o:t;return e.apply(i?n:this,arguments)}var i=e&yt,o=Ki(t);return r}function Zi(t){return function(e){e=zu(e);var n=J(e)?Q(e):rt,r=n?n[0]:e.charAt(0),i=n?Ri(n,1).join(""):e.slice(1);return r[t]()+i}}function Yi(t){return function(e){return y(Th(hh(e).replace(Jn,"")),t,"")}}function Ki(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=vl(t.prototype),r=t.apply(n,e);return uu(r)?r:n}}function Xi(t,e,n){function r(){for(var o=arguments.length,s=ac(o),u=o,h=ko(r);u--;)s[u]=arguments[u];var c=o<3&&s[0]!==h&&s[o-1]!==h?[]:q(s,h);if(o-=c.length,o<n)return ho(t,e,eo,r.placeholder,rt,s,c,rt,rt,n-o);var l=this&&this!==ar&&this instanceof r?i:t;return a(l,this,s)}var i=Ki(t);return r}function Qi(t){return function(e,n,r){var i=lc(e);if(!Ys(e)){var o=Co(n,3);e=Hu(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:rt}}function to(t){return So(function(e){var n=e.length,i=n,o=r.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new dc(st);if(o&&!s&&"wrapper"==bo(a))var s=new r([],(!0))}for(i=s?i:n;++i<n;){a=e[i];var u=bo(a),h="wrapper"==u?Rl(a):rt;s=h&&Jo(h[0])&&h[1]==(bt|_t|xt|kt)&&!h[4].length&&1==h[9]?s[bo(h[0])].apply(s,h[3]):1==a.length&&Jo(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&xf(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function eo(t,e,n,r,i,o,a,s,u,h){function c(){for(var v=arguments.length,m=ac(v),_=v;_--;)m[_]=arguments[_];if(d)var S=ko(c),x=N(m,S);if(r&&(m=Di(m,r,i,d)),o&&(m=Ni(m,o,a,d)),v-=x,d&&v<h){var w=q(m,S);return ho(t,e,eo,c.placeholder,n,m,w,s,u,h-v)}var b=f?n:this,k=p?b[t]:t;return v=m.length,s?m=Qo(m,s):g&&v>1&&m.reverse(),l&&u<v&&(m.length=u),this&&this!==ar&&this instanceof c&&(k=y||Ki(k)),k.apply(b,m)}var l=e&bt,f=e&yt,p=e&vt,d=e&(_t|St),g=e&Ct,y=p?rt:Ki(t);return c}function no(t,e){return function(n,r){return Rr(n,t,e(r),{})}}function ro(t,e){return function(n,r){var i;if(n===rt&&r===rt)return e;if(n!==rt&&(i=n),r!==rt){if(i===rt)return r;"string"==typeof n||"string"==typeof r?(n=yi(n),r=yi(r)):(n=gi(n),r=gi(r)),i=t(n,r)}return i}}function io(t){return So(function(e){return e=d(e,O(Co())),oi(function(n){var r=this;return t(e,function(t){return a(t,r,n)})})})}function oo(t,e){e=e===rt?" ":yi(e);var n=e.length;if(n<2)return n?ii(e,t):e;var r=ii(e,Jc(t/X(e)));return J(e)?Ri(Q(r),0,t).join(""):r.slice(0,t)}function ao(t,e,n,r){function i(){for(var e=-1,u=arguments.length,h=-1,c=r.length,l=ac(c+u),f=this&&this!==ar&&this instanceof i?s:t;++h<c;)l[h]=r[h];for(;u--;)l[h++]=arguments[++e];return a(f,o?n:this,l)}var o=e&yt,s=Ki(t);return i}function so(t){return function(e,n,r){return r&&"number"!=typeof r&&No(e,n,r)&&(n=r=rt),e=Cu(e),n===rt?(n=e,e=0):n=Cu(n),r=r===rt?e<n?1:-1:Cu(r),ri(e,n,r,t)}}function uo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Eu(e),n=Eu(n)),t(e,n)}}function ho(t,e,n,r,i,o,a,s,u,h){var c=e&_t,l=c?a:rt,f=c?rt:a,p=c?o:rt,d=c?rt:o;e|=c?xt:wt,e&=~(c?wt:xt),e&mt||(e&=~(yt|vt));var g=[t,e,i,p,l,d,f,s,u,h],y=n.apply(rt,g);return Jo(t)&&Ll(y,g),y.placeholder=r,ta(y,t,e)}function co(t){var e=cc[t];return function(t,n){if(t=Eu(t),n=null==n?0:Yc(Pu(n),292)){var r=(zu(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return r=(zu(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function lo(t){return function(e){var n=Il(e);return n==Yt?V(e):n==re?Z(e):W(e,t(e))}}function fo(t,e,n,r,i,o,a,s){var u=e&vt;if(!u&&"function"!=typeof t)throw new dc(st);var h=r?r.length:0;if(h||(e&=~(xt|wt),r=i=rt),a=a===rt?a:Zc(Pu(a),0),s=s===rt?s:Pu(s),h-=i?i.length:0,e&wt){var c=r,l=i;r=i=rt}var f=u?rt:Rl(t),p=[t,e,n,r,i,c,l,o,a,s];if(f&&$o(p,f),t=p[0],e=p[1],n=p[2],r=p[3],i=p[4],s=p[9]=p[9]===rt?u?0:t.length:Zc(p[9]-h,0),!s&&e&(_t|St)&&(e&=~(_t|St)),e&&e!=yt)d=e==_t||e==St?Xi(t,e,s):e!=xt&&e!=(yt|xt)||i.length?eo.apply(rt,p):ao(t,e,n,r);else var d=$i(t,e,n);var g=f?wl:Ll;return ta(g(d,p),t,e)}function po(t,e,n,r){return t===rt||Zs(t,vc[n])&&!Sc.call(r,n)?e:t}function go(t,e,n,r,i,o){return uu(t)&&uu(e)&&(o.set(e,t),qr(t,e,rt,go,o),o["delete"](e)),t}function yo(t){return vu(t)?rt:t}function vo(t,e,n,r,i,o){var a=n&dt,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var h=o.get(t);if(h&&o.get(e))return h==e;var c=-1,l=!0,f=n&gt?new vn:rt;for(o.set(t,e),o.set(e,t);++c<s;){var p=t[c],d=e[c];if(r)var g=a?r(d,p,c,e,t,o):r(p,d,c,t,e,o);if(g!==rt){if(g)continue;l=!1;break}if(f){if(!m(e,function(t,e){if(!M(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)})){l=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){l=!1;break}}return o["delete"](t),o["delete"](e),l}function mo(t,e,n,r,i,o,a){switch(n){case ce:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case he:return!(t.byteLength!=e.byteLength||!o(new Tc(t),new Tc(e)));
case Ht:case Vt:case Kt:return Zs(+t,+e);case qt:return t.name==e.name&&t.message==e.message;case ne:case ie:return t==e+"";case Yt:var s=V;case re:var u=r&dt;if(s||(s=$),t.size!=e.size&&!u)return!1;var h=a.get(t);if(h)return h==e;r|=gt,a.set(t,e);var c=vo(s(t),s(e),r,i,o,a);return a["delete"](t),c;case oe:if(gl)return gl.call(t)==gl.call(e)}return!1}function _o(t,e,n,r,i,o){var a=n&dt,s=xo(t),u=s.length,h=xo(e),c=h.length;if(u!=c&&!a)return!1;for(var l=u;l--;){var f=s[l];if(!(a?f in e:Sc.call(e,f)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var d=!0;o.set(t,e),o.set(e,t);for(var g=a;++l<u;){f=s[l];var y=t[f],v=e[f];if(r)var m=a?r(v,y,f,e,t,o):r(y,v,f,t,e,o);if(!(m===rt?y===v||i(y,v,n,r,o):m)){d=!1;break}g||(g="constructor"==f)}if(d&&!g){var _=t.constructor,S=e.constructor;_!=S&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof S&&S instanceof S)&&(d=!1)}return o["delete"](t),o["delete"](e),d}function So(t){return Ol(Ko(t,rt,va),t+"")}function xo(t){return ur(t,Hu,El)}function wo(t){return ur(t,Vu,Tl)}function bo(t){for(var e=t.name+"",n=ul[e],r=Sc.call(ul,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function ko(t){var n=Sc.call(e,"placeholder")?e:t;return n.placeholder}function Co(){var t=e.iteratee||Ah;return t=t===Ah?jr:t,arguments.length?t(arguments[0],arguments[1]):t}function Po(t,e){var n=t.__data__;return Uo(e)?n["string"==typeof e?"string":"hash"]:n.map}function Ro(t){for(var e=Hu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Vo(i)]}return e}function Eo(t,e){var n=U(t,e);return Mr(n)?n:rt}function To(t){var e=Sc.call(t,Bc),n=t[Bc];try{t[Bc]=rt;var r=!0}catch(i){}var o=bc.call(t);return r&&(e?t[Bc]=n:delete t[Bc]),o}function Io(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Yc(e,t+a);break;case"takeRight":t=Zc(t,e-a)}}return{start:t,end:e}}function zo(t){var e=t.match(je);return e?e[1].split(Ue):[]}function Lo(t,e,n){e=Pi(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=ra(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=null==t?0:t.length,!!i&&su(i)&&Do(a,i)&&(xf(t)||Sf(t)))}function Wo(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&Sc.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Oo(t){return"function"!=typeof t.constructor||Ho(t)?{}:vl(zc(t))}function Ao(t,e,n,r){var i=t.constructor;switch(e){case he:return Ti(t);case Ht:case Vt:return new i((+t));case ce:return Ii(t,r);case le:case fe:case pe:case de:case ge:case ye:case ve:case me:case _e:return Ai(t,r);case Yt:return zi(t,r,n);case Kt:case ie:return new i(t);case ne:return Li(t);case re:return Wi(t,r,n);case oe:return Oi(t)}}function Mo(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Ne,"{\n/* [wrapped with "+e+"] */\n")}function Bo(t){return xf(t)||Sf(t)||!!(Ac&&t&&t[Ac])}function Do(t,e){return e=null==e?Ot:e,!!e&&("number"==typeof t||Ye.test(t))&&t>-1&&t%1==0&&t<e}function No(t,e,n){if(!uu(n))return!1;var r=typeof e;return!!("number"==r?Ys(n)&&Do(e,n.length):"string"==r&&e in n)&&Zs(n[e],t)}function jo(t,e){if(xf(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Su(t))||(ze.test(t)||!Ie.test(t)||null!=e&&t in lc(e))}function Uo(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Jo(t){var n=bo(t),r=e[n];if("function"!=typeof r||!(n in _.prototype))return!1;if(t===r)return!0;var i=Rl(r);return!!i&&t===i[0]}function Fo(t){return!!wc&&wc in t}function Ho(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||vc;return t===n}function Vo(t){return t===t&&!uu(t)}function Go(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==rt||t in lc(n)))}}function qo(t){var e=As(t,function(t){return n.size===ht&&n.clear(),t}),n=e.cache;return e}function $o(t,e){var n=t[1],r=e[1],i=n|r,o=i<(yt|vt|bt),a=r==bt&&n==_t||r==bt&&n==kt&&t[7].length<=e[8]||r==(bt|kt)&&e[7].length<=e[8]&&n==_t;if(!o&&!a)return t;r&yt&&(t[2]=e[2],i|=n&yt?0:mt);var s=e[3];if(s){var u=t[3];t[3]=u?Di(u,s,e[4]):s,t[4]=u?q(t[3],ct):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?Ni(u,s,e[6]):s,t[6]=u?q(t[5],ct):e[6]),s=e[7],s&&(t[7]=s),r&bt&&(t[8]=null==t[8]?e[8]:Yc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Zo(t){var e=[];if(null!=t)for(var n in lc(t))e.push(n);return e}function Yo(t){return bc.call(t)}function Ko(t,e,n){return e=Zc(e===rt?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Zc(r.length-e,0),s=ac(o);++i<o;)s[i]=r[e+i];i=-1;for(var u=ac(e+1);++i<e;)u[i]=r[i];return u[e]=n(s),a(t,this,u)}}function Xo(t,e){return e.length<2?t:sr(t,ci(e,0,-1))}function Qo(t,e){for(var n=t.length,r=Yc(e.length,n),i=ji(t);r--;){var o=e[r];t[r]=Do(o,n)?i[o]:rt}return t}function ta(t,e,n){var r=e+"";return Ol(t,Mo(r,oa(zo(r),n)))}function ea(t){var e=0,n=0;return function(){var r=Kc(),i=Tt-(r-n);if(n=r,i>0){if(++e>=Et)return arguments[0]}else e=0;return t.apply(rt,arguments)}}function na(t,e){var n=-1,r=t.length,i=r-1;for(e=e===rt?r:e;++n<e;){var o=ni(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function ra(t){if("string"==typeof t||Su(t))return t;var e=t+"";return"0"==e&&1/t==-Wt?"-0":e}function ia(t){if(null!=t){try{return _c.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function oa(t,e){return u(jt,function(n){var r="_."+n[0];e&n[1]&&!f(t,r)&&t.push(r)}),t.sort()}function aa(t){if(t instanceof _)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=ji(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function sa(t,e,n){e=(n?No(t,e,n):e===rt)?1:Zc(Pu(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=ac(Jc(r/e));i<r;)a[o++]=ci(t,i,i+=e);return a}function ua(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function ha(){var t=arguments.length;if(!t)return[];for(var e=ac(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return g(xf(n)?ji(n):[n],tr(e,1))}function ca(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===rt?1:Pu(e),ci(t,e<0?0:e,r)):[]}function la(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===rt?1:Pu(e),e=r-e,ci(t,0,e<0?0:e)):[]}function fa(t,e){return t&&t.length?Si(t,Co(e,3),!0,!0):[]}function pa(t,e){return t&&t.length?Si(t,Co(e,3),!0):[]}function da(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&No(t,e,n)&&(n=0,r=i),Xn(t,e,n,r)):[]}function ga(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Pu(n);return i<0&&(i=Zc(r+i,0)),w(t,Co(e,3),i)}function ya(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==rt&&(i=Pu(n),i=n<0?Zc(r+i,0):Yc(i,r-1)),w(t,Co(e,3),i,!0)}function va(t){var e=null==t?0:t.length;return e?tr(t,1):[]}function ma(t){var e=null==t?0:t.length;return e?tr(t,Wt):[]}function _a(t,e){var n=null==t?0:t.length;return n?(e=e===rt?1:Pu(e),tr(t,e)):[]}function Sa(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function xa(t){return t&&t.length?t[0]:rt}function wa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Pu(n);return i<0&&(i=Zc(r+i,0)),b(t,e,i)}function ba(t){var e=null==t?0:t.length;return e?ci(t,0,-1):[]}function ka(t,e){return null==t?"":qc.call(t,e)}function Ca(t){var e=null==t?0:t.length;return e?t[e-1]:rt}function Pa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==rt&&(i=Pu(n),i=i<0?Zc(r+i,0):Yc(i,r-1)),e===e?K(t,e,i):w(t,C,i,!0)}function Ra(t,e){return t&&t.length?Zr(t,Pu(e)):rt}function Ea(t,e){return t&&t.length&&e&&e.length?ti(t,e):t}function Ta(t,e,n){return t&&t.length&&e&&e.length?ti(t,e,Co(n,2)):t}function Ia(t,e,n){return t&&t.length&&e&&e.length?ti(t,e,rt,n):t}function za(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Co(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return ei(t,i),n}function La(t){return null==t?t:tl.call(t)}function Wa(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&No(t,e,n)?(e=0,n=r):(e=null==e?0:Pu(e),n=n===rt?r:Pu(n)),ci(t,e,n)):[]}function Oa(t,e){return fi(t,e)}function Aa(t,e,n){return pi(t,e,Co(n,2))}function Ma(t,e){var n=null==t?0:t.length;if(n){var r=fi(t,e);if(r<n&&Zs(t[r],e))return r}return-1}function Ba(t,e){return fi(t,e,!0)}function Da(t,e,n){return pi(t,e,Co(n,2),!0)}function Na(t,e){var n=null==t?0:t.length;if(n){var r=fi(t,e,!0)-1;if(Zs(t[r],e))return r}return-1}function ja(t){return t&&t.length?di(t):[]}function Ua(t,e){return t&&t.length?di(t,Co(e,2)):[]}function Ja(t){var e=null==t?0:t.length;return e?ci(t,1,e):[]}function Fa(t,e,n){return t&&t.length?(e=n||e===rt?1:Pu(e),ci(t,0,e<0?0:e)):[]}function Ha(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===rt?1:Pu(e),e=r-e,ci(t,e<0?0:e,r)):[]}function Va(t,e){return t&&t.length?Si(t,Co(e,3),!1,!0):[]}function Ga(t,e){return t&&t.length?Si(t,Co(e,3)):[]}function qa(t){return t&&t.length?vi(t):[]}function $a(t,e){return t&&t.length?vi(t,Co(e,2)):[]}function Za(t,e){return e="function"==typeof e?e:rt,t&&t.length?vi(t,rt,e):[]}function Ya(t){if(!t||!t.length)return[];var e=0;return t=l(t,function(t){if(Ks(t))return e=Zc(t.length,e),!0}),L(e,function(e){return d(t,R(e))})}function Ka(t,e){if(!t||!t.length)return[];var n=Ya(t);return null==e?n:d(n,function(t){return a(e,rt,t)})}function Xa(t,e){return bi(t||[],e||[],zn)}function Qa(t,e){return bi(t||[],e||[],ui)}function ts(t){var n=e(t);return n.__chain__=!0,n}function es(t,e){return e(t),t}function ns(t,e){return e(t)}function rs(){return ts(this)}function is(){return new r(this.value(),this.__chain__)}function os(){this.__values__===rt&&(this.__values__=ku(this.value()));var t=this.__index__>=this.__values__.length,e=t?rt:this.__values__[this.__index__++];return{done:t,value:e}}function as(){return this}function ss(t){for(var e,r=this;r instanceof n;){var i=aa(r);i.__index__=0,i.__values__=rt,e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function us(){var t=this.__wrapped__;if(t instanceof _){var e=t;return this.__actions__.length&&(e=new _(this)),e=e.reverse(),e.__actions__.push({func:ns,args:[La],thisArg:rt}),new r(e,this.__chain__)}return this.thru(La)}function hs(){return xi(this.__wrapped__,this.__actions__)}function cs(t,e,n){var r=xf(t)?c:Gn;return n&&No(t,e,n)&&(e=rt),r(t,Co(e,3))}function ls(t,e){var n=xf(t)?l:Qn;return n(t,Co(e,3))}function fs(t,e){return tr(ms(t,e),1)}function ps(t,e){return tr(ms(t,e),Wt)}function ds(t,e,n){return n=n===rt?1:Pu(n),tr(ms(t,e),n)}function gs(t,e){var n=xf(t)?u:ml;return n(t,Co(e,3))}function ys(t,e){var n=xf(t)?h:_l;return n(t,Co(e,3))}function vs(t,e,n,r){t=Ys(t)?t:rh(t),n=n&&!r?Pu(n):0;var i=t.length;return n<0&&(n=Zc(i+n,0)),_u(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&b(t,e,n)>-1}function ms(t,e){var n=xf(t)?d:Hr;return n(t,Co(e,3))}function _s(t,e,n,r){return null==t?[]:(xf(e)||(e=null==e?[]:[e]),n=r?rt:n,xf(n)||(n=null==n?[]:[n]),Yr(t,e,n))}function Ss(t,e,n){var r=xf(t)?y:T,i=arguments.length<3;return r(t,Co(e,4),n,i,ml)}function xs(t,e,n){var r=xf(t)?v:T,i=arguments.length<3;return r(t,Co(e,4),n,i,_l)}function ws(t,e){var n=xf(t)?l:Qn;return n(t,Ms(Co(e,3)))}function bs(t){var e=xf(t)?Rn:ai;return e(t)}function ks(t,e,n){e=(n?No(t,e,n):e===rt)?1:Pu(e);var r=xf(t)?En:si;return r(t,e)}function Cs(t){var e=xf(t)?Tn:hi;return e(t)}function Ps(t){if(null==t)return 0;if(Ys(t))return _u(t)?X(t):t.length;var e=Il(t);return e==Yt||e==re?t.size:Ur(t).length}function Rs(t,e,n){var r=xf(t)?m:li;return n&&No(t,e,n)&&(e=rt),r(t,Co(e,3))}function Es(t,e){if("function"!=typeof e)throw new dc(st);return t=Pu(t),function(){if(--t<1)return e.apply(this,arguments)}}function Ts(t,e,n){return e=n?rt:e,e=t&&null==e?t.length:e,fo(t,bt,rt,rt,rt,rt,e)}function Is(t,e){var n;if("function"!=typeof e)throw new dc(st);return t=Pu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=rt),n}}function zs(t,e,n){e=n?rt:e;var r=fo(t,_t,rt,rt,rt,rt,rt,e);return r.placeholder=zs.placeholder,r}function Ls(t,e,n){e=n?rt:e;var r=fo(t,St,rt,rt,rt,rt,rt,e);return r.placeholder=Ls.placeholder,r}function Ws(t,e,n){function r(e){var n=f,r=p;return f=p=rt,m=e,g=t.apply(r,n)}function i(t){return m=t,y=Wl(s,e),_?r(t):g}function o(t){var n=t-v,r=t-m,i=e-n;return S?Yc(i,d-r):i}function a(t){var n=t-v,r=t-m;return v===rt||n>=e||n<0||S&&r>=d}function s(){var t=hf();return a(t)?u(t):void(y=Wl(s,o(t)))}function u(t){return y=rt,x&&f?r(t):(f=p=rt,g)}function h(){y!==rt&&Cl(y),m=0,f=v=p=y=rt}function c(){return y===rt?g:u(hf())}function l(){var t=hf(),n=a(t);if(f=arguments,p=this,v=t,n){if(y===rt)return i(v);if(S)return y=Wl(s,e),r(v)}return y===rt&&(y=Wl(s,e)),g}var f,p,d,g,y,v,m=0,_=!1,S=!1,x=!0;if("function"!=typeof t)throw new dc(st);return e=Eu(e)||0,uu(n)&&(_=!!n.leading,S="maxWait"in n,d=S?Zc(Eu(n.maxWait)||0,e):d,x="trailing"in n?!!n.trailing:x),l.cancel=h,l.flush=c,l}function Os(t){return fo(t,Ct)}function As(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new dc(st);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(As.Cache||ln),n}function Ms(t){if("function"!=typeof t)throw new dc(st);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Bs(t){return Is(2,t)}function Ds(t,e){if("function"!=typeof t)throw new dc(st);return e=e===rt?e:Pu(e),oi(t,e)}function Ns(t,e){if("function"!=typeof t)throw new dc(st);return e=null==e?0:Zc(Pu(e),0),oi(function(n){var r=n[e],i=Ri(n,0,e);return r&&g(i,r),a(t,this,i)})}function js(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new dc(st);return uu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ws(t,e,{leading:r,maxWait:e,trailing:i})}function Us(t){return Ts(t,1)}function Js(t,e){return gf(Ci(e),t)}function Fs(){if(!arguments.length)return[];var t=arguments[0];return xf(t)?t:[t]}function Hs(t){return Nn(t,pt)}function Vs(t,e){return e="function"==typeof e?e:rt,Nn(t,pt,e)}function Gs(t){return Nn(t,lt|pt)}function qs(t,e){return e="function"==typeof e?e:rt,Nn(t,lt|pt,e)}function $s(t,e){return null==e||Un(t,e,Hu(e))}function Zs(t,e){return t===e||t!==t&&e!==e}function Ys(t){return null!=t&&su(t.length)&&!ou(t)}function Ks(t){return hu(t)&&Ys(t)}function Xs(t){return t===!0||t===!1||hu(t)&&cr(t)==Ht}function Qs(t){return hu(t)&&1===t.nodeType&&!vu(t)}function tu(t){if(null==t)return!0;if(Ys(t)&&(xf(t)||"string"==typeof t||"function"==typeof t.splice||bf(t)||Ef(t)||Sf(t)))return!t.length;var e=Il(t);if(e==Yt||e==re)return!t.size;if(Ho(t))return!Ur(t).length;for(var n in t)if(Sc.call(t,n))return!1;return!0}function eu(t,e){return Lr(t,e)}function nu(t,e,n){n="function"==typeof n?n:rt;var r=n?n(t,e):rt;return r===rt?Lr(t,e,rt,n):!!r}function ru(t){if(!hu(t))return!1;var e=cr(t);return e==qt||e==Gt||"string"==typeof t.message&&"string"==typeof t.name&&!vu(t)}function iu(t){return"number"==typeof t&&Gc(t)}function ou(t){if(!uu(t))return!1;var e=cr(t);return e==$t||e==Zt||e==Ft||e==ee}function au(t){return"number"==typeof t&&t==Pu(t)}function su(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ot}function uu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function hu(t){return null!=t&&"object"==typeof t}function cu(t,e){return t===e||Ar(t,e,Ro(e))}function lu(t,e,n){return n="function"==typeof n?n:rt,Ar(t,e,Ro(e),n)}function fu(t){return yu(t)&&t!=+t}function pu(t){if(zl(t))throw new uc(at);return Mr(t)}function du(t){return null===t}function gu(t){return null==t}function yu(t){return"number"==typeof t||hu(t)&&cr(t)==Kt}function vu(t){if(!hu(t)||cr(t)!=Qt)return!1;var e=zc(t);if(null===e)return!0;var n=Sc.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&_c.call(n)==kc}function mu(t){return au(t)&&t>=-Ot&&t<=Ot}function _u(t){return"string"==typeof t||!xf(t)&&hu(t)&&cr(t)==ie}function Su(t){return"symbol"==typeof t||hu(t)&&cr(t)==oe}function xu(t){return t===rt}function wu(t){return hu(t)&&Il(t)==se}function bu(t){return hu(t)&&cr(t)==ue}function ku(t){if(!t)return[];if(Ys(t))return _u(t)?Q(t):ji(t);if(Mc&&t[Mc])return H(t[Mc]());var e=Il(t),n=e==Yt?V:e==re?$:rh;return n(t)}function Cu(t){if(!t)return 0===t?t:0;if(t=Eu(t),t===Wt||t===-Wt){var e=t<0?-1:1;return e*At}return t===t?t:0}function Pu(t){var e=Cu(t),n=e%1;return e===e?n?e-n:e:0}function Ru(t){return t?Dn(Pu(t),0,Bt):0}function Eu(t){if("number"==typeof t)return t;if(Su(t))return Mt;if(uu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=uu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Me,"");var n=qe.test(t);return n||Ze.test(t)?rr(t.slice(2),n?2:8):Ge.test(t)?Mt:+t}function Tu(t){return Ui(t,Vu(t))}function Iu(t){return t?Dn(Pu(t),-Ot,Ot):0===t?t:0}function zu(t){return null==t?"":yi(t)}function Lu(t,e){var n=vl(t);return null==e?n:On(n,e)}function Wu(t,e){return x(t,Co(e,3),er)}function Ou(t,e){return x(t,Co(e,3),ir)}function Au(t,e){return null==t?t:Sl(t,Co(e,3),Vu)}function Mu(t,e){return null==t?t:xl(t,Co(e,3),Vu)}function Bu(t,e){return t&&er(t,Co(e,3))}function Du(t,e){return t&&ir(t,Co(e,3))}function Nu(t){return null==t?[]:or(t,Hu(t))}function ju(t){return null==t?[]:or(t,Vu(t))}function Uu(t,e,n){var r=null==t?rt:sr(t,e);return r===rt?n:r}function Ju(t,e){return null!=t&&Lo(t,e,mr)}function Fu(t,e){return null!=t&&Lo(t,e,wr)}function Hu(t){return Ys(t)?Pn(t):Ur(t)}function Vu(t){return Ys(t)?Pn(t,!0):Jr(t)}function Gu(t,e){var n={};return e=Co(e,3),er(t,function(t,r,i){Mn(n,e(t,r,i),t)}),n}function qu(t,e){var n={};return e=Co(e,3),er(t,function(t,r,i){Mn(n,r,e(t,r,i))}),n}function $u(t,e){return Zu(t,Ms(Co(e)))}function Zu(t,e){if(null==t)return{};var n=d(wo(t),function(t){return[t]});return e=Co(e),Xr(t,n,function(t,n){return e(t,n[0])})}function Yu(t,e,n){e=Pi(e,t);var r=-1,i=e.length;for(i||(i=1,t=rt);++r<i;){var o=null==t?rt:t[ra(e[r])];o===rt&&(r=i,o=n),t=ou(o)?o.call(t):o}return t}function Ku(t,e,n){return null==t?t:ui(t,e,n)}function Xu(t,e,n,r){return r="function"==typeof r?r:rt,null==t?t:ui(t,e,n,r)}function Qu(t,e,n){var r=xf(t),i=r||bf(t)||Ef(t);if(e=Co(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:uu(t)&&ou(o)?vl(zc(t)):{}}return(i?u:er)(t,function(t,r,i){return e(n,t,r,i)}),n}function th(t,e){return null==t||mi(t,e)}function eh(t,e,n){return null==t?t:_i(t,e,Ci(n))}function nh(t,e,n,r){return r="function"==typeof r?r:rt,null==t?t:_i(t,e,Ci(n),r)}function rh(t){return null==t?[]:A(t,Hu(t))}function ih(t){return null==t?[]:A(t,Vu(t))}function oh(t,e,n){return n===rt&&(n=e,e=rt),n!==rt&&(n=Eu(n),n=n===n?n:0),e!==rt&&(e=Eu(e),e=e===e?e:0),Dn(Eu(t),e,n)}function ah(t,e,n){return e=Cu(e),n===rt?(n=e,e=0):n=Cu(n),t=Eu(t),Cr(t,e,n)}function sh(t,e,n){if(n&&"boolean"!=typeof n&&No(t,e,n)&&(e=n=rt),n===rt&&("boolean"==typeof e?(n=e,e=rt):"boolean"==typeof t&&(n=t,t=rt)),t===rt&&e===rt?(t=0,e=1):(t=Cu(t),e===rt?(e=t,t=0):e=Cu(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Qc();return Yc(t+i*(e-t+nr("1e-"+((i+"").length-1))),e)}return ni(t,e)}function uh(t){return tp(zu(t).toLowerCase())}function hh(t){return t=zu(t),t&&t.replace(Ke,_r).replace(Fn,"")}function ch(t,e,n){t=zu(t),e=yi(e);var r=t.length;n=n===rt?r:Dn(Pu(n),0,r);var i=n;return n-=e.length,n>=0&&t.slice(n,i)==e}function lh(t){return t=zu(t),t&&Pe.test(t)?t.replace(ke,Sr):t}function fh(t){return t=zu(t),t&&Ae.test(t)?t.replace(Oe,"\\$&"):t}function ph(t,e,n){t=zu(t),e=Pu(e);var r=e?X(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return oo(Fc(i),n)+t+oo(Jc(i),n)}function dh(t,e,n){t=zu(t),e=Pu(e);var r=e?X(t):0;return e&&r<e?t+oo(e-r,n):t}function gh(t,e,n){t=zu(t),e=Pu(e);var r=e?X(t):0;return e&&r<e?oo(e-r,n)+t:t}function yh(t,e,n){return n||null==e?e=0:e&&(e=+e),Xc(zu(t).replace(Be,""),e||0)}function vh(t,e,n){return e=(n?No(t,e,n):e===rt)?1:Pu(e),ii(zu(t),e)}function mh(){var t=arguments,e=zu(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function _h(t,e,n){return n&&"number"!=typeof n&&No(t,e,n)&&(e=n=rt),(n=n===rt?Bt:n>>>0)?(t=zu(t),t&&("string"==typeof e||null!=e&&!Pf(e))&&(e=yi(e),!e&&J(t))?Ri(Q(t),0,n):t.split(e,n)):[]}function Sh(t,e,n){return t=zu(t),n=null==n?0:Dn(Pu(n),0,t.length),e=yi(e),t.slice(n,n+e.length)==e}function xh(t,n,r){var i=e.templateSettings;r&&No(t,n,r)&&(n=rt),t=zu(t),n=Wf({},n,i,po);var o,a,s=Wf({},n.imports,i.imports,po),u=Hu(s),h=A(s,u),c=0,l=n.interpolate||Xe,f="__p += '",p=fc((n.escape||Xe).source+"|"+l.source+"|"+(l===Te?He:Xe).source+"|"+(n.evaluate||Xe).source+"|$","g"),d="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Zn+"]")+"\n";t.replace(p,function(e,n,r,i,s,u){return r||(r=i),f+=t.slice(c,u).replace(Qe,j),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),f+="';\n";var g=n.variable;g||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(Se,""):f).replace(xe,"$1").replace(we,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var y=ep(function(){return hc(u,d+"return "+f).apply(rt,h)});if(y.source=f,ru(y))throw y;return y}function wh(t){return zu(t).toLowerCase()}function bh(t){return zu(t).toUpperCase()}function kh(t,e,n){if(t=zu(t),t&&(n||e===rt))return t.replace(Me,"");if(!t||!(e=yi(e)))return t;var r=Q(t),i=Q(e),o=B(r,i),a=D(r,i)+1;return Ri(r,o,a).join("")}function Ch(t,e,n){if(t=zu(t),t&&(n||e===rt))return t.replace(De,"");if(!t||!(e=yi(e)))return t;var r=Q(t),i=D(r,Q(e))+1;return Ri(r,0,i).join("")}function Ph(t,e,n){if(t=zu(t),t&&(n||e===rt))return t.replace(Be,"");if(!t||!(e=yi(e)))return t;var r=Q(t),i=B(r,Q(e));return Ri(r,i).join("")}function Rh(t,e){var n=Pt,r=Rt;if(uu(e)){var i="separator"in e?e.separator:i;n="length"in e?Pu(e.length):n,r="omission"in e?yi(e.omission):r}t=zu(t);var o=t.length;if(J(t)){var a=Q(t);o=a.length}if(n>=o)return t;var s=n-X(r);if(s<1)return r;var u=a?Ri(a,0,s).join(""):t.slice(0,s);if(i===rt)return u+r;if(a&&(s+=u.length-s),Pf(i)){if(t.slice(s).search(i)){var h,c=u;for(i.global||(i=fc(i.source,zu(Ve.exec(i))+"g")),i.lastIndex=0;h=i.exec(c);)var l=h.index;u=u.slice(0,l===rt?s:l)}}else if(t.indexOf(yi(i),s)!=s){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r}function Eh(t){return t=zu(t),t&&Ce.test(t)?t.replace(be,xr):t}function Th(t,e,n){return t=zu(t),e=n?rt:e,e===rt?F(t)?nt(t):S(t):t.match(e)||[]}function Ih(t){var e=null==t?0:t.length,n=Co();return t=e?d(t,function(t){if("function"!=typeof t[1])throw new dc(st);return[n(t[0]),t[1]]}):[],oi(function(n){for(var r=-1;++r<e;){var i=t[r];if(a(i[0],this,n))return a(i[1],this,n)}})}function zh(t){return jn(Nn(t,lt))}function Lh(t){return function(){return t}}function Wh(t,e){return null==t||t!==t?e:t}function Oh(t){return t}function Ah(t){return jr("function"==typeof t?t:Nn(t,lt))}function Mh(t){return Vr(Nn(t,lt))}function Bh(t,e){return Gr(t,Nn(e,lt))}function Dh(t,e,n){var r=Hu(e),i=or(e,r);null!=n||uu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=or(e,Hu(e)));var o=!(uu(n)&&"chain"in n&&!n.chain),a=ou(t);return u(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=ji(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,g([this.value()],arguments))})}),t}function Nh(){return ar._===this&&(ar._=Cc),this}function jh(){}function Uh(t){return t=Pu(t),oi(function(e){return Zr(e,t)})}function Jh(t){return jo(t)?R(ra(t)):Qr(t)}function Fh(t){return function(e){return null==t?rt:sr(t,e)}}function Hh(){return[]}function Vh(){return!1}function Gh(){return{}}function qh(){return""}function $h(){return!0}function Zh(t,e){if(t=Pu(t),t<1||t>Ot)return[];var n=Bt,r=Yc(t,Bt);e=Co(e),t-=Bt;for(var i=L(r,e);++n<t;)e(n);return i}function Yh(t){return xf(t)?d(t,ra):Su(t)?[t]:ji(Al(zu(t)))}function Kh(t){var e=++xc;return zu(t)+e}function Xh(t){return t&&t.length?qn(t,Oh,lr):rt}function Qh(t,e){return t&&t.length?qn(t,Co(e,2),lr):rt}function tc(t){return P(t,Oh)}function ec(t,e){return P(t,Co(e,2))}function nc(t){return t&&t.length?qn(t,Oh,Fr):rt}function rc(t,e){return t&&t.length?qn(t,Co(e,2),Fr):rt}function ic(t){return t&&t.length?z(t,Oh):0}function oc(t,e){return t&&t.length?z(t,Co(e,2)):0}t=null==t?ar:br.defaults(ar.Object(),t,br.pick(ar,$n));var ac=t.Array,sc=t.Date,uc=t.Error,hc=t.Function,cc=t.Math,lc=t.Object,fc=t.RegExp,pc=t.String,dc=t.TypeError,gc=ac.prototype,yc=hc.prototype,vc=lc.prototype,mc=t["__core-js_shared__"],_c=yc.toString,Sc=vc.hasOwnProperty,xc=0,wc=function(){var t=/[^.]+$/.exec(mc&&mc.keys&&mc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),bc=vc.toString,kc=_c.call(lc),Cc=ar._,Pc=fc("^"+_c.call(Sc).replace(Oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rc=hr?t.Buffer:rt,Ec=t.Symbol,Tc=t.Uint8Array,Ic=Rc?Rc.allocUnsafe:rt,zc=G(lc.getPrototypeOf,lc),Lc=lc.create,Wc=vc.propertyIsEnumerable,Oc=gc.splice,Ac=Ec?Ec.isConcatSpreadable:rt,Mc=Ec?Ec.iterator:rt,Bc=Ec?Ec.toStringTag:rt,Dc=function(){try{var t=Eo(lc,"defineProperty");return t({},"",{}),t}catch(e){}}(),Nc=t.clearTimeout!==ar.clearTimeout&&t.clearTimeout,jc=sc&&sc.now!==ar.Date.now&&sc.now,Uc=t.setTimeout!==ar.setTimeout&&t.setTimeout,Jc=cc.ceil,Fc=cc.floor,Hc=lc.getOwnPropertySymbols,Vc=Rc?Rc.isBuffer:rt,Gc=t.isFinite,qc=gc.join,$c=G(lc.keys,lc),Zc=cc.max,Yc=cc.min,Kc=sc.now,Xc=t.parseInt,Qc=cc.random,tl=gc.reverse,el=Eo(t,"DataView"),nl=Eo(t,"Map"),rl=Eo(t,"Promise"),il=Eo(t,"Set"),ol=Eo(t,"WeakMap"),al=Eo(lc,"create"),sl=ol&&new ol,ul={},hl=ia(el),cl=ia(nl),ll=ia(rl),fl=ia(il),pl=ia(ol),dl=Ec?Ec.prototype:rt,gl=dl?dl.valueOf:rt,yl=dl?dl.toString:rt,vl=function(){function t(){}return function(e){if(!uu(e))return{};if(Lc)return Lc(e);t.prototype=e;var n=new t;return t.prototype=rt,n}}();e.templateSettings={escape:Re,evaluate:Ee,interpolate:Te,variable:"",imports:{_:e}},e.prototype=n.prototype,e.prototype.constructor=e,r.prototype=vl(n.prototype),r.prototype.constructor=r,_.prototype=vl(n.prototype),_.prototype.constructor=_,et.prototype.clear=Je,et.prototype["delete"]=tn,et.prototype.get=en,et.prototype.has=nn,et.prototype.set=rn,on.prototype.clear=an,on.prototype["delete"]=sn,on.prototype.get=un,on.prototype.has=hn,on.prototype.set=cn,ln.prototype.clear=fn,ln.prototype["delete"]=pn,ln.prototype.get=dn,ln.prototype.has=gn,ln.prototype.set=yn,vn.prototype.add=vn.prototype.push=mn,vn.prototype.has=_n,Sn.prototype.clear=xn,Sn.prototype["delete"]=wn,Sn.prototype.get=bn,Sn.prototype.has=kn,Sn.prototype.set=Cn;var ml=Gi(er),_l=Gi(ir,!0),Sl=qi(),xl=qi(!0),wl=sl?function(t,e){return sl.set(t,e),t}:Oh,bl=Dc?function(t,e){return Dc(t,"toString",{configurable:!0,enumerable:!1,value:Lh(e),writable:!0})}:Oh,kl=oi,Cl=Nc||function(t){return ar.clearTimeout(t)},Pl=il&&1/$(new il([,-0]))[1]==Wt?function(t){return new il(t)}:jh,Rl=sl?function(t){return sl.get(t)}:jh,El=Hc?function(t){return null==t?[]:(t=lc(t),l(Hc(t),function(e){return Wc.call(t,e)}))}:Hh,Tl=Hc?function(t){for(var e=[];t;)g(e,El(t)),t=zc(t);return e}:Hh,Il=cr;(el&&Il(new el(new ArrayBuffer(1)))!=ce||nl&&Il(new nl)!=Yt||rl&&Il(rl.resolve())!=te||il&&Il(new il)!=re||ol&&Il(new ol)!=se)&&(Il=function(t){var e=cr(t),n=e==Qt?t.constructor:rt,r=n?ia(n):"";if(r)switch(r){case hl:return ce;case cl:return Yt;case ll:return te;case fl:return re;case pl:return se}return e});var zl=mc?ou:Vh,Ll=ea(wl),Wl=Uc||function(t,e){return ar.setTimeout(t,e)},Ol=ea(bl),Al=qo(function(t){var e=[];return Le.test(t)&&e.push(""),t.replace(We,function(t,n,r,i){e.push(r?i.replace(Fe,"$1"):n||t)}),e}),Ml=oi(function(t,e){return Ks(t)?Vn(t,tr(e,1,Ks,!0)):[]}),Bl=oi(function(t,e){var n=Ca(e);return Ks(n)&&(n=rt),Ks(t)?Vn(t,tr(e,1,Ks,!0),Co(n,2)):[]}),Dl=oi(function(t,e){var n=Ca(e);return Ks(n)&&(n=rt),Ks(t)?Vn(t,tr(e,1,Ks,!0),rt,n):[]}),Nl=oi(function(t){var e=d(t,ki);return e.length&&e[0]===t[0]?Pr(e):[]}),jl=oi(function(t){var e=Ca(t),n=d(t,ki);return e===Ca(n)?e=rt:n.pop(),n.length&&n[0]===t[0]?Pr(n,Co(e,2)):[]}),Ul=oi(function(t){var e=Ca(t),n=d(t,ki);return e="function"==typeof e?e:rt,e&&n.pop(),n.length&&n[0]===t[0]?Pr(n,rt,e):[]}),Jl=oi(Ea),Fl=So(function(t,e){var n=null==t?0:t.length,r=Bn(t,e);return ei(t,d(e,function(t){return Do(t,n)?+t:t}).sort(Mi)),r}),Hl=oi(function(t){return vi(tr(t,1,Ks,!0))}),Vl=oi(function(t){var e=Ca(t);return Ks(e)&&(e=rt),vi(tr(t,1,Ks,!0),Co(e,2))}),Gl=oi(function(t){var e=Ca(t);return e="function"==typeof e?e:rt,vi(tr(t,1,Ks,!0),rt,e)}),ql=oi(function(t,e){return Ks(t)?Vn(t,e):[]}),$l=oi(function(t){return wi(l(t,Ks))}),Zl=oi(function(t){var e=Ca(t);return Ks(e)&&(e=rt),wi(l(t,Ks),Co(e,2))}),Yl=oi(function(t){var e=Ca(t);return e="function"==typeof e?e:rt,wi(l(t,Ks),rt,e)}),Kl=oi(Ya),Xl=oi(function(t){var e=t.length,n=e>1?t[e-1]:rt;return n="function"==typeof n?(t.pop(),n):rt,Ka(t,n)}),Ql=So(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return Bn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof _&&Do(n)?(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:ns,args:[o],thisArg:rt}),new r(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(rt),t})):this.thru(o)}),tf=Hi(function(t,e,n){Sc.call(t,n)?++t[n]:Mn(t,n,1)}),ef=Qi(ga),nf=Qi(ya),rf=Hi(function(t,e,n){Sc.call(t,n)?t[n].push(e):Mn(t,n,[e])}),of=oi(function(t,e,n){var r=-1,i="function"==typeof e,o=Ys(t)?ac(t.length):[];return ml(t,function(t){o[++r]=i?a(e,t,n):Er(t,e,n)}),o}),af=Hi(function(t,e,n){Mn(t,n,e)}),sf=Hi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),uf=oi(function(t,e){if(null==t)return[];var n=e.length;return n>1&&No(t,e[0],e[1])?e=[]:n>2&&No(e[0],e[1],e[2])&&(e=[e[0]]),Yr(t,tr(e,1),[])}),hf=jc||function(){return ar.Date.now()},cf=oi(function(t,e,n){var r=yt;if(n.length){var i=q(n,ko(cf));r|=xt}return fo(t,r,e,n,i)}),lf=oi(function(t,e,n){var r=yt|vt;if(n.length){var i=q(n,ko(lf));r|=xt}return fo(e,r,t,n,i)}),ff=oi(function(t,e){return Hn(t,1,e)}),pf=oi(function(t,e,n){return Hn(t,Eu(e)||0,n)});As.Cache=ln;var df=kl(function(t,e){e=1==e.length&&xf(e[0])?d(e[0],O(Co())):d(tr(e,1),O(Co()));var n=e.length;return oi(function(r){for(var i=-1,o=Yc(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return a(t,this,r)})}),gf=oi(function(t,e){var n=q(e,ko(gf));return fo(t,xt,rt,e,n)}),yf=oi(function(t,e){var n=q(e,ko(yf));return fo(t,wt,rt,e,n)}),vf=So(function(t,e){return fo(t,kt,rt,rt,rt,e)}),mf=uo(lr),_f=uo(function(t,e){return t>=e}),Sf=Tr(function(){return arguments}())?Tr:function(t){return hu(t)&&Sc.call(t,"callee")&&!Wc.call(t,"callee")},xf=ac.isArray,wf=fr?O(fr):Ir,bf=Vc||Vh,kf=pr?O(pr):zr,Cf=dr?O(dr):Or,Pf=gr?O(gr):Br,Rf=yr?O(yr):Dr,Ef=vr?O(vr):Nr,Tf=uo(Fr),If=uo(function(t,e){return t<=e}),zf=Vi(function(t,e){if(Ho(e)||Ys(e))return void Ui(e,Hu(e),t);for(var n in e)Sc.call(e,n)&&zn(t,n,e[n])}),Lf=Vi(function(t,e){Ui(e,Vu(e),t)}),Wf=Vi(function(t,e,n,r){Ui(e,Vu(e),t,r)}),Of=Vi(function(t,e,n,r){Ui(e,Hu(e),t,r)}),Af=So(Bn),Mf=oi(function(t){return t.push(rt,po),a(Wf,rt,t)}),Bf=oi(function(t){return t.push(rt,go),a(Jf,rt,t)}),Df=no(function(t,e,n){t[e]=n},Lh(Oh)),Nf=no(function(t,e,n){Sc.call(t,e)?t[e].push(n):t[e]=[n]},Co),jf=oi(Er),Uf=Vi(function(t,e,n){qr(t,e,n)}),Jf=Vi(function(t,e,n,r){qr(t,e,n,r)}),Ff=So(function(t,e){var n={};if(null==t)return n;var r=!1;e=d(e,function(e){return e=Pi(e,t),r||(r=e.length>1),e}),Ui(t,wo(t),n),r&&(n=Nn(n,lt|ft|pt,yo));for(var i=e.length;i--;)mi(n,e[i]);return n}),Hf=So(function(t,e){return null==t?{}:Kr(t,e)}),Vf=lo(Hu),Gf=lo(Vu),qf=Yi(function(t,e,n){return e=e.toLowerCase(),t+(n?uh(e):e)}),$f=Yi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Zf=Yi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Yf=Zi("toLowerCase"),Kf=Yi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase();
}),Xf=Yi(function(t,e,n){return t+(n?" ":"")+tp(e)}),Qf=Yi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),tp=Zi("toUpperCase"),ep=oi(function(t,e){try{return a(t,rt,e)}catch(n){return ru(n)?n:new uc(n)}}),np=So(function(t,e){return u(e,function(e){e=ra(e),Mn(t,e,cf(t[e],t))}),t}),rp=to(),ip=to(!0),op=oi(function(t,e){return function(n){return Er(n,t,e)}}),ap=oi(function(t,e){return function(n){return Er(t,n,e)}}),sp=io(d),up=io(c),hp=io(m),cp=so(),lp=so(!0),fp=ro(function(t,e){return t+e},0),pp=co("ceil"),dp=ro(function(t,e){return t/e},1),gp=co("floor"),yp=ro(function(t,e){return t*e},1),vp=co("round"),mp=ro(function(t,e){return t-e},0);return e.after=Es,e.ary=Ts,e.assign=zf,e.assignIn=Lf,e.assignInWith=Wf,e.assignWith=Of,e.at=Af,e.before=Is,e.bind=cf,e.bindAll=np,e.bindKey=lf,e.castArray=Fs,e.chain=ts,e.chunk=sa,e.compact=ua,e.concat=ha,e.cond=Ih,e.conforms=zh,e.constant=Lh,e.countBy=tf,e.create=Lu,e.curry=zs,e.curryRight=Ls,e.debounce=Ws,e.defaults=Mf,e.defaultsDeep=Bf,e.defer=ff,e.delay=pf,e.difference=Ml,e.differenceBy=Bl,e.differenceWith=Dl,e.drop=ca,e.dropRight=la,e.dropRightWhile=fa,e.dropWhile=pa,e.fill=da,e.filter=ls,e.flatMap=fs,e.flatMapDeep=ps,e.flatMapDepth=ds,e.flatten=va,e.flattenDeep=ma,e.flattenDepth=_a,e.flip=Os,e.flow=rp,e.flowRight=ip,e.fromPairs=Sa,e.functions=Nu,e.functionsIn=ju,e.groupBy=rf,e.initial=ba,e.intersection=Nl,e.intersectionBy=jl,e.intersectionWith=Ul,e.invert=Df,e.invertBy=Nf,e.invokeMap=of,e.iteratee=Ah,e.keyBy=af,e.keys=Hu,e.keysIn=Vu,e.map=ms,e.mapKeys=Gu,e.mapValues=qu,e.matches=Mh,e.matchesProperty=Bh,e.memoize=As,e.merge=Uf,e.mergeWith=Jf,e.method=op,e.methodOf=ap,e.mixin=Dh,e.negate=Ms,e.nthArg=Uh,e.omit=Ff,e.omitBy=$u,e.once=Bs,e.orderBy=_s,e.over=sp,e.overArgs=df,e.overEvery=up,e.overSome=hp,e.partial=gf,e.partialRight=yf,e.partition=sf,e.pick=Hf,e.pickBy=Zu,e.property=Jh,e.propertyOf=Fh,e.pull=Jl,e.pullAll=Ea,e.pullAllBy=Ta,e.pullAllWith=Ia,e.pullAt=Fl,e.range=cp,e.rangeRight=lp,e.rearg=vf,e.reject=ws,e.remove=za,e.rest=Ds,e.reverse=La,e.sampleSize=ks,e.set=Ku,e.setWith=Xu,e.shuffle=Cs,e.slice=Wa,e.sortBy=uf,e.sortedUniq=ja,e.sortedUniqBy=Ua,e.split=_h,e.spread=Ns,e.tail=Ja,e.take=Fa,e.takeRight=Ha,e.takeRightWhile=Va,e.takeWhile=Ga,e.tap=es,e.throttle=js,e.thru=ns,e.toArray=ku,e.toPairs=Vf,e.toPairsIn=Gf,e.toPath=Yh,e.toPlainObject=Tu,e.transform=Qu,e.unary=Us,e.union=Hl,e.unionBy=Vl,e.unionWith=Gl,e.uniq=qa,e.uniqBy=$a,e.uniqWith=Za,e.unset=th,e.unzip=Ya,e.unzipWith=Ka,e.update=eh,e.updateWith=nh,e.values=rh,e.valuesIn=ih,e.without=ql,e.words=Th,e.wrap=Js,e.xor=$l,e.xorBy=Zl,e.xorWith=Yl,e.zip=Kl,e.zipObject=Xa,e.zipObjectDeep=Qa,e.zipWith=Xl,e.entries=Vf,e.entriesIn=Gf,e.extend=Lf,e.extendWith=Wf,Dh(e,e),e.add=fp,e.attempt=ep,e.camelCase=qf,e.capitalize=uh,e.ceil=pp,e.clamp=oh,e.clone=Hs,e.cloneDeep=Gs,e.cloneDeepWith=qs,e.cloneWith=Vs,e.conformsTo=$s,e.deburr=hh,e.defaultTo=Wh,e.divide=dp,e.endsWith=ch,e.eq=Zs,e.escape=lh,e.escapeRegExp=fh,e.every=cs,e.find=ef,e.findIndex=ga,e.findKey=Wu,e.findLast=nf,e.findLastIndex=ya,e.findLastKey=Ou,e.floor=gp,e.forEach=gs,e.forEachRight=ys,e.forIn=Au,e.forInRight=Mu,e.forOwn=Bu,e.forOwnRight=Du,e.get=Uu,e.gt=mf,e.gte=_f,e.has=Ju,e.hasIn=Fu,e.head=xa,e.identity=Oh,e.includes=vs,e.indexOf=wa,e.inRange=ah,e.invoke=jf,e.isArguments=Sf,e.isArray=xf,e.isArrayBuffer=wf,e.isArrayLike=Ys,e.isArrayLikeObject=Ks,e.isBoolean=Xs,e.isBuffer=bf,e.isDate=kf,e.isElement=Qs,e.isEmpty=tu,e.isEqual=eu,e.isEqualWith=nu,e.isError=ru,e.isFinite=iu,e.isFunction=ou,e.isInteger=au,e.isLength=su,e.isMap=Cf,e.isMatch=cu,e.isMatchWith=lu,e.isNaN=fu,e.isNative=pu,e.isNil=gu,e.isNull=du,e.isNumber=yu,e.isObject=uu,e.isObjectLike=hu,e.isPlainObject=vu,e.isRegExp=Pf,e.isSafeInteger=mu,e.isSet=Rf,e.isString=_u,e.isSymbol=Su,e.isTypedArray=Ef,e.isUndefined=xu,e.isWeakMap=wu,e.isWeakSet=bu,e.join=ka,e.kebabCase=$f,e.last=Ca,e.lastIndexOf=Pa,e.lowerCase=Zf,e.lowerFirst=Yf,e.lt=Tf,e.lte=If,e.max=Xh,e.maxBy=Qh,e.mean=tc,e.meanBy=ec,e.min=nc,e.minBy=rc,e.stubArray=Hh,e.stubFalse=Vh,e.stubObject=Gh,e.stubString=qh,e.stubTrue=$h,e.multiply=yp,e.nth=Ra,e.noConflict=Nh,e.noop=jh,e.now=hf,e.pad=ph,e.padEnd=dh,e.padStart=gh,e.parseInt=yh,e.random=sh,e.reduce=Ss,e.reduceRight=xs,e.repeat=vh,e.replace=mh,e.result=Yu,e.round=vp,e.runInContext=kr,e.sample=bs,e.size=Ps,e.snakeCase=Kf,e.some=Rs,e.sortedIndex=Oa,e.sortedIndexBy=Aa,e.sortedIndexOf=Ma,e.sortedLastIndex=Ba,e.sortedLastIndexBy=Da,e.sortedLastIndexOf=Na,e.startCase=Xf,e.startsWith=Sh,e.subtract=mp,e.sum=ic,e.sumBy=oc,e.template=xh,e.times=Zh,e.toFinite=Cu,e.toInteger=Pu,e.toLength=Ru,e.toLower=wh,e.toNumber=Eu,e.toSafeInteger=Iu,e.toString=zu,e.toUpper=bh,e.trim=kh,e.trimEnd=Ch,e.trimStart=Ph,e.truncate=Rh,e.unescape=Eh,e.uniqueId=Kh,e.upperCase=Qf,e.upperFirst=tp,e.each=gs,e.eachRight=ys,e.first=xa,Dh(e,function(){var t={};return er(e,function(n,r){Sc.call(e.prototype,r)||(t[r]=n)}),t}(),{chain:!1}),e.VERSION=it,u(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),u(["drop","take"],function(t,e){_.prototype[t]=function(n){n=n===rt?1:Zc(Pu(n),0);var r=this.__filtered__&&!e?new _(this):this.clone();return r.__filtered__?r.__takeCount__=Yc(n,r.__takeCount__):r.__views__.push({size:Yc(n,Bt),type:t+(r.__dir__<0?"Right":"")}),r},_.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),u(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==It||n==Lt;_.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Co(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),u(["head","last"],function(t,e){var n="take"+(e?"Right":"");_.prototype[t]=function(){return this[n](1).value()[0]}}),u(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");_.prototype[t]=function(){return this.__filtered__?new _(this):this[n](1)}}),_.prototype.compact=function(){return this.filter(Oh)},_.prototype.find=function(t){return this.filter(t).head()},_.prototype.findLast=function(t){return this.reverse().find(t)},_.prototype.invokeMap=oi(function(t,e){return"function"==typeof t?new _(this):this.map(function(n){return Er(n,t,e)})}),_.prototype.reject=function(t){return this.filter(Ms(Co(t)))},_.prototype.slice=function(t,e){t=Pu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new _(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==rt&&(e=Pu(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},_.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},_.prototype.toArray=function(){return this.take(Bt)},er(_.prototype,function(t,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),o=/^(?:head|last)$/.test(n),a=e[o?"take"+("last"==n?"Right":""):n],s=o||/^find/.test(n);a&&(e.prototype[n]=function(){var n=this.__wrapped__,u=o?[1]:arguments,h=n instanceof _,c=u[0],l=h||xf(n),f=function(t){var n=a.apply(e,g([t],u));return o&&p?n[0]:n};l&&i&&"function"==typeof c&&1!=c.length&&(h=l=!1);var p=this.__chain__,d=!!this.__actions__.length,y=s&&!p,v=h&&!d;if(!s&&l){n=v?n:new _(this);var m=t.apply(n,u);return m.__actions__.push({func:ns,args:[f],thisArg:rt}),new r(m,p)}return y&&v?t.apply(this,u):(m=this.thru(f),y?o?m.value()[0]:m.value():m)})}),u(["pop","push","shift","sort","splice","unshift"],function(t){var n=gc[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var e=this.value();return n.apply(xf(e)?e:[],t)}return this[r](function(e){return n.apply(xf(e)?e:[],t)})}}),er(_.prototype,function(t,n){var r=e[n];if(r){var i=r.name+"",o=ul[i]||(ul[i]=[]);o.push({name:n,func:r})}}),ul[eo(rt,vt).name]=[{name:"wrapper",func:rt}],_.prototype.clone=E,_.prototype.reverse=Y,_.prototype.value=tt,e.prototype.at=Ql,e.prototype.chain=rs,e.prototype.commit=is,e.prototype.next=os,e.prototype.plant=ss,e.prototype.reverse=us,e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=hs,e.prototype.first=e.prototype.head,Mc&&(e.prototype[Mc]=as),e},br=wr();"function"==typeof t&&"object"==typeof t.amd&&t.amd?(ar._=br,t(function(){return br})):ur?((ur.exports=br)._=br,sr._=br):ar._=br}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){var r,i,o,a,s,u,h,c,l,f,p,d,g,y,v,m,_=function(t,e){return function(){return t.apply(e,arguments)}},S=[].slice,x=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};u=t("./actions"),h=t("./bindEvents"),l=t("./math"),f=t("./shapes"),c=f.createShape,v=f.shapeToJSON,i=f.JSONToShape,p=t("./canvasRenderer").renderShapeToContext,d=t("./svgRenderer").renderShapeToSVG,g=t("./renderSnapshotToImage"),y=t("./renderSnapshotToSVG"),a=t("../tools/Pencil"),m=t("./util"),s=t("lodash"),r="infinite",e.exports=o=function(){function t(t,e){this.setTool=_(this.setTool,this),this.setImageSize=_(this.setImageSize,this);var n,i;i=null,n=null,t instanceof HTMLElement?(n=t,i=e):i=t,this.opts=i||{},this.config={zoomMin:i.zoomMin||.2,zoomMax:i.zoomMax||4,zoomStep:i.zoomStep||.2},this.colors={primary:i.primaryColor||"#000",secondary:i.secondaryColor||"#fff",background:i.backgroundColor||"transparent"},this.watermarkImage=i.watermarkImage,this.watermarkScale=i.watermarkScale||1,this.backgroundCanvas=document.createElement("canvas"),this.backgroundCtx=this.backgroundCanvas.getContext("2d"),this.canvas=document.createElement("canvas"),this.canvas.style["background-color"]="transparent",this.buffer=document.createElement("canvas"),this.buffer.style["background-color"]="transparent",this.ctx=this.canvas.getContext("2d"),this.bufferCtx=this.buffer.getContext("2d"),this.backingScale=m.getBackingScale(this.ctx),this.backgroundShapes=i.backgroundShapes||[],this._shapesInProgress=[],this.shapes=[],this.undoStack=[],this.redoStack=[],this.isDragging=!1,this.position={x:0,y:0},this.scale=1,this.setTool(new this.opts.tools[0](this)),this.commentToolShapes=this.prepareShapes(JSON.parse(localStorage.getItem("commentToolShapes"))),this.isCommentToolActive=!1,this.manageComments(),this.width=i.imageSize.width||r,this.height=i.imageSize.height||r,this.setZoom(this.scale),i.snapshot&&this.loadSnapshot(i.snapshot),this.isBound=!1,n&&this.bindToElement(n),this.respondToSizeChange=function(){}}return t.prototype.bindToElement=function(t){var e,n;return this.containerEl?void console.warn("Trying to bind Literally Canvas to a DOM element more than once is unsupported."):(this.containerEl=t,this._unsubscribeEvents=h(this,this.containerEl,this.opts.keyboardShortcuts),this.containerEl.style["background-color"]=this.colors.background,this.containerEl.appendChild(this.backgroundCanvas),this.containerEl.appendChild(this.canvas),this.isBound=!0,n=function(t){return function(){return t.keepPanInImageBounds(),t.repaintAllLayers()}}(this),this.respondToSizeChange=m.matchElementSize(this.containerEl,[this.backgroundCanvas,this.canvas],this.backingScale,n),this.watermarkImage&&(this.watermarkImage.onload=function(t){return function(){return t.repaintLayer("background")}}(this)),null!=(e=this.tool)&&e.didBecomeActive(this),n())},t.prototype._teardown=function(){var t;return null!=(t=this.tool)&&t.willBecomeInactive(this),"function"==typeof this._unsubscribeEvents&&this._unsubscribeEvents(),this.tool=null,this.containerEl=null,this.isBound=!1},t.prototype.trigger=function(t,e){return this.canvas.dispatchEvent(new CustomEvent(t,{detail:e})),null},t.prototype.on=function(t,e){var n;return n=function(t){return e(t.detail)},this.canvas.addEventListener(t,n),function(e){return function(){return e.canvas.removeEventListener(t,n)}}(this)},t.prototype.getRenderScale=function(){return this.scale*this.backingScale},t.prototype.clientCoordsToDrawingCoords=function(t,e){return{x:(t*this.backingScale-this.position.x)/this.getRenderScale(),y:(e*this.backingScale-this.position.y)/this.getRenderScale()}},t.prototype.drawingCoordsToClientCoords=function(t,e){return{x:t*this.getRenderScale()+this.position.x,y:e*this.getRenderScale()+this.position.y}},t.prototype.setImageSize=function(t,e){return this.width=t||r,this.height=e||r,this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("imageSizeChange",{width:this.width,height:this.height})},t.prototype.prepareShapes=function(t){var e;return e=[],s.forEach(t,function(t){return e.push(LC.createShape("Comment",t))}),e},t.prototype.manageActiveToolComments=function(){return this.tool&&"Comment"===this.tool.name?this.isCommentToolActive=!0:this.isCommentToolActive=!1,this.manageComments()},t.prototype.manageComments=function(){var t;return!this.isCommentToolActive&&lc?(t=s.remove(this.backgroundShapes,function(t){return function(t){return"Comment"===t.name}}(this)),this.commentToolShapes=s.merge(this.commentToolShapes,t),localStorage.setItem("commentToolShapes",JSON.stringify(this.commentToolShapes)),this.repaintLayer("background"),this.trigger("drawingChange")):this.isCommentToolActive&&lc?(this.backgroundShapes=s.concat(this.backgroundShapes,this.commentToolShapes),this.repaintLayer("background"),this.trigger("drawingChange")):void 0},t.prototype.setTool=function(t){var e;if(this.tool&&this.tool.name===t.name&&"Comment"===t.name?(this.tool=null,this.manageActiveToolComments(),null!=(e=this.tool)&&e.willBecomeInactive(this)):(this.tool=t,this.manageActiveToolComments()),this.trigger("toolChange",{tool:t}),this.isBound&&this.tool)return this.tool.didBecomeActive(this)},t.prototype.setShapesInProgress=function(t){return this._shapesInProgress=t},t.prototype.pointerDown=function(t,e){var n;return n=this.clientCoordsToDrawingCoords(t,e),this.tool&&this.tool.usesSimpleAPI?(this.tool.begin(n.x,n.y,this),this.isDragging=!0,this.trigger("drawStart",{tool:this.tool})):(this.isDragging=!0,this.trigger("lc-pointerdown",{tool:this.tool,x:n.x,y:n.y,rawX:t,rawY:e}))},t.prototype.pointerMove=function(t,e){return m.requestAnimationFrame(function(n){return function(){var r,i;return r=n.clientCoordsToDrawingCoords(t,e),null!=(i=n.tool)&&i.usesSimpleAPI?n.isDragging?(n.tool["continue"](r.x,r.y,n),n.trigger("drawContinue",{tool:n.tool})):void 0:n.isDragging?n.trigger("lc-pointerdrag",{tool:n.tool,x:r.x,y:r.y,rawX:t,rawY:e}):n.trigger("lc-pointermove",{tool:n.tool,x:r.x,y:r.y,rawX:t,rawY:e})}}(this))},t.prototype.pointerUp=function(t,e){var n;return n=this.clientCoordsToDrawingCoords(t,e),this.tool&&this.tool.usesSimpleAPI?this.isDragging?(this.tool.end(n.x,n.y,this),this.isDragging=!1,this.trigger("drawEnd",{tool:this.tool})):void 0:(this.isDragging=!1,this.trigger("lc-pointerup",{tool:this.tool,x:n.x,y:n.y,rawX:t,rawY:e}))},t.prototype.setColor=function(t,e){if(this.colors[t]=e,this.isBound){switch(t){case"background":this.containerEl.style.backgroundColor=this.colors.background,this.repaintLayer("background");break;case"primary":this.repaintLayer("main");break;case"secondary":this.repaintLayer("main")}return this.trigger(t+"ColorChange",this.colors[t]),"background"===t?this.trigger("drawingChange"):void 0}},t.prototype.getColor=function(t){return this.colors[t]},t.prototype.saveShape=function(t,e,n){return null==e&&(e=!0),null==n&&(n=null),n||(n=this.shapes.length?this.shapes[this.shapes.length-1].id:null),this.execute(new u.AddShapeAction(this,t,n)),e&&this.trigger("shapeSave",{shape:t,previousShapeId:n}),this.trigger("drawingChange")},t.prototype.pan=function(t,e){return this.setPan(this.position.x-t,this.position.y-e)},t.prototype.keepPanInImageBounds=function(){var t,e,n,i;return e=this.getRenderScale(),t=this.position,n=t.x,i=t.y,this.width!==r&&(n=this.canvas.width>this.width*e?(this.canvas.width-this.width*e)/2:Math.max(Math.min(0,n),this.canvas.width-this.width*e)),this.height!==r&&(i=this.canvas.height>this.height*e?(this.canvas.height-this.height*e)/2:Math.max(Math.min(0,i),this.canvas.height-this.height*e)),this.position={x:n,y:i}},t.prototype.setPan=function(t,e){return this.position={x:t,y:e},this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("pan",{x:this.position.x,y:this.position.y})},t.prototype.zoom=function(t){var e;return e=this.scale+t,e=Math.max(e,this.config.zoomMin),e=Math.min(e,this.config.zoomMax),e=Math.round(100*e)/100,this.setZoom(e)},t.prototype.setZoom=function(t){var e,n;return e=this.clientCoordsToDrawingCoords(this.canvas.width/2,this.canvas.height/2),n=this.scale,this.scale=t,this.position.x=this.canvas.width/2*this.backingScale-e.x*this.getRenderScale(),this.position.y=this.canvas.height/2*this.backingScale-e.y*this.getRenderScale(),this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("zoom",{oldScale:n,newScale:this.scale})},t.prototype.setWatermarkImage=function(t){if(this.watermarkImage=t,m.addImageOnload(t,function(t){return function(){return t.repaintLayer("background")}}(this)),t.width)return this.repaintLayer("background")},t.prototype.repaintAllLayers=function(){var t,e,n,r;for(r=["background","main"],t=0,n=r.length;t<n;t++)e=r[t],this.repaintLayer(e);return null},t.prototype.repaintLayer=function(t,e){var n;if(null==e&&(e="main"===t),this.isBound){switch(t){case"background":this.backgroundCtx.clearRect(0,0,this.backgroundCanvas.width,this.backgroundCanvas.height),n=function(t){return function(){return t.repaintLayer("background")}}(this),this.watermarkImage&&this._renderWatermark(this.backgroundCtx,!0,n),this.draw(this.backgroundShapes,this.backgroundCtx,n);break;case"main":n=function(t){return function(){return t.repaintLayer("main",!0)}}(this),e&&(this.buffer.width=this.canvas.width,this.buffer.height=this.canvas.height,this.bufferCtx.clearRect(0,0,this.buffer.width,this.buffer.height),this.draw(this.shapes,this.bufferCtx,n)),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.width>0&&this.canvas.height>0&&(this.ctx.fillStyle="#ccc",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.clipped(function(t){return function(){return t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.ctx.drawImage(t.buffer,0,0)}}(this),this.ctx),this.clipped(function(t){return function(){return t.transformed(function(){var e,n,r,i,o;for(r=t._shapesInProgress,i=[],e=0,n=r.length;e<n;e++)o=r[e],i.push(p(t.ctx,o,{bufferCtx:t.bufferCtx,shouldOnlyDrawLatest:!0}));return i},t.ctx,t.bufferCtx)}}(this),this.ctx,this.bufferCtx))}return this.trigger("repaint",{layerKey:t})}},t.prototype._renderWatermark=function(t,e,n){return null==e&&(e=!0),this.watermarkImage.width?(t.save(),t.translate(t.canvas.width/2,t.canvas.height/2),t.scale(this.watermarkScale,this.watermarkScale),e&&t.scale(this.backingScale,this.backingScale),t.drawImage(this.watermarkImage,-this.watermarkImage.width/2,-this.watermarkImage.height/2),t.restore()):void(this.watermarkImage.onload=n)},t.prototype.drawShapeInProgress=function(t){return this.repaintLayer("main",!1),this.clipped(function(e){return function(){return e.transformed(function(){return p(e.ctx,t,{bufferCtx:e.bufferCtx,shouldOnlyDrawLatest:!0})},e.ctx,e.bufferCtx)}}(this),this.ctx,this.bufferCtx)},t.prototype.draw=function(t,e,n){var r;if(t.length)return r=function(r){return function(){var r,i,o,a;for(o=[],r=0,i=t.length;r<i;r++)a=t[r],o.push(p(e,a,{retryCallback:n}));return o}}(this),this.clipped(function(t){return function(){return t.transformed(r,e)}}(this),e)},t.prototype.clipped=function(){var t,e,n,i,o,a,s,u,h,c,l,f;for(n=arguments[0],t=2<=arguments.length?S.call(arguments,1):[],l=this.width===r?0:this.position.x,f=this.height===r?0:this.position.y,c=function(){switch(this.width){case r:return this.canvas.width;default:return this.width*this.getRenderScale()}}.call(this),i=function(){switch(this.height){case r:return this.canvas.height;default:return this.height*this.getRenderScale()}}.call(this),o=0,s=t.length;o<s;o++)e=t[o],e.save(),e.beginPath(),e.rect(l,f,c,i),e.clip();for(n(),h=[],a=0,u=t.length;a<u;a++)e=t[a],h.push(e.restore());return h},t.prototype.transformed=function(){var t,e,n,r,i,o,a,s,u;for(n=arguments[0],t=2<=arguments.length?S.call(arguments,1):[],r=0,o=t.length;r<o;r++)e=t[r],e.save(),e.translate(Math.floor(this.position.x),Math.floor(this.position.y)),u=this.getRenderScale(),e.scale(u,u);for(n(),s=[],i=0,a=t.length;i<a;i++)e=t[i],s.push(e.restore());return s},t.prototype.clear=function(t){var e,n;return null==t&&(t=!0),n=this.shapes,e=[],this.setShapesInProgress([]),this.execute(new u.ClearAction(this,n,e)),this.repaintLayer("main"),t&&this.trigger("clear",null),this.trigger("drawingChange",{})},t.prototype.execute=function(t){return this.undoStack.push(t),t["do"](),this.redoStack=[]},t.prototype.undo=function(){var t;if(this.undoStack.length)return t=this.undoStack.pop(),t.undo(),this.redoStack.push(t),this.trigger("undo",{action:t}),this.trigger("drawingChange",{})},t.prototype.redo=function(){var t;if(this.redoStack.length)return t=this.redoStack.pop(),this.undoStack.push(t),t["do"](),this.trigger("redo",{action:t}),this.trigger("drawingChange",{})},t.prototype.canUndo=function(){return!!this.undoStack.length},t.prototype.canRedo=function(){return!!this.redoStack.length},t.prototype.getPixel=function(t,e){var n,r;return n=this.drawingCoordsToClientCoords(t,e),r=this.ctx.getImageData(n.x,n.y,1,1).data,r[3]?"rgb("+r[0]+", "+r[1]+", "+r[2]+")":null},t.prototype.getContentBounds=function(){return m.getBoundingRect(this.shapes.concat(this.backgroundShapes).map(function(t){return t.getBoundingRect()}),this.width===r?0:this.width,this.height===r?0:this.height)},t.prototype.getDefaultImageRect=function(t,e){var n;return null==t&&(t={width:0,height:0}),null==e&&(e={top:0,right:0,bottom:0,left:0}),m.getDefaultImageRect(function(){var t,e,r,i;for(r=this.shapes.concat(this.backgroundShapes),i=[],t=0,e=r.length;t<e;t++)n=r[t],i.push(n.getBoundingRect(this.ctx));return i}.call(this),t,e)},t.prototype.getImage=function(t){return null==t&&(t={}),null==t.includeWatermark&&(t.includeWatermark=!0),null==t.scaleDownRetina&&(t.scaleDownRetina=!0),null==t.scale&&(t.scale=1),t.scaleDownRetina||(t.scale*=this.backingScale),t.includeWatermark&&(t.watermarkImage=this.watermarkImage,t.watermarkScale=this.watermarkScale,t.scaleDownRetina||(t.watermarkScale*=this.backingScale)),g(this.getSnapshot(),t)},t.prototype.canvasForExport=function(){return this.repaintAllLayers(),m.combineCanvases(this.backgroundCanvas,this.canvas)},t.prototype.canvasWithBackground=function(t){return m.combineCanvases(t,this.canvasForExport())},t.prototype.getSnapshot=function(t){var e,n,r,i,o,a;for(null==t&&(t=null),null==t&&(t=["shapes","imageSize","colors","position","scale","backgroundShapes"]),a={},i=["colors","position","scale"],e=0,r=i.length;e<r;e++)n=i[e],x.call(t,n)>=0&&(a[n]=this[n]);return x.call(t,"shapes")>=0&&(a.shapes=function(){var t,e,n,r;for(n=this.shapes,r=[],t=0,e=n.length;t<e;t++)o=n[t],r.push(v(o));return r}.call(this)),x.call(t,"backgroundShapes")>=0&&(a.backgroundShapes=function(){var t,e,n,r;for(n=this.backgroundShapes,r=[],t=0,e=n.length;t<e;t++)o=n[t],r.push(v(o));return r}.call(this)),x.call(t,"imageSize")>=0&&(a.imageSize={width:this.width,height:this.height}),a},t.prototype.getSnapshotJSON=function(){return console.warn("lc.getSnapshotJSON() is deprecated. use JSON.stringify(lc.getSnapshot()) instead."),JSON.stringify(this.getSnapshot())},t.prototype.getSVGString=function(t){return null==t&&(t={}),y(this.getSnapshot(),t)},t.prototype.loadSnapshot=function(t){var e,n,r,o,a,s,h,c,l,f;if(t){if(t.colors)for(s=["primary","secondary","background"],e=0,o=s.length;e<o;e++)r=s[e],this.setColor(r,t.colors[r]);if(t.shapes)for(this.shapes=[],h=t.shapes,n=0,a=h.length;n<a;n++)f=h[n],l=i(f),l&&this.execute(new u.AddShapeAction(this,l));return t.backgroundShapes&&(this.backgroundShapes=function(){var e,n,r,o;for(r=t.backgroundShapes,o=[],e=0,n=r.length;e<n;e++)c=r[e],o.push(i(c));return o}()),t.imageSize&&(this.width=t.imageSize.width,this.height=t.imageSize.height),t.position&&(this.position=t.position),t.scale&&(this.scale=t.scale),this.repaintAllLayers(),this.trigger("snapshotLoad"),this.trigger("drawingChange",{})}},t.prototype.loadSnapshotJSON=function(t){return console.warn("lc.loadSnapshotJSON() is deprecated. use lc.loadSnapshot(JSON.parse(snapshot)) instead."),this.loadSnapshot(JSON.parse(t))},t}()},{"../tools/Pencil":26,"./actions":4,"./bindEvents":5,"./canvasRenderer":6,"./math":11,"./renderSnapshotToImage":12,"./renderSnapshotToSVG":13,"./shapes":14,"./svgRenderer":15,"./util":16,lodash:1}],3:[function(t,e,n){var r,i,o,a;t("./fontmetrics.js"),a=function(t){var e,n,r,i,o,a,s,u;for(n=t.split(" "),r=0,o=0,a=n.length;o<a;o++)i=n[o],s=parseInt(i.replace("px",""),10),isNaN(s)||(r=s);if(!r)throw"Font size not found";return u=t.substring(n[0].length+1).replace("bold ","").replace("italic ","").replace("underline ",""),e=u,{fontSize:r,fontFamily:e}},o=function(t,e,n){var r,i,o,a,s,u,h,c,l,f;if(!e.length)return["",""];for(i=0,u=0,h=0,f=!1;;)if(i+=1,o=i>=e.length,s=!o&&e[i].match(/\s/),a=s||o,l=e.substring(0,i),r=!n||t.measureTextWidth(l).width<=n,r&&(h=i),a&&f&&(f=!1,r&&(u=i)),f=!s,o||!r){if(r)return[e,""];if(u>0){for(c=u+1;c<e.length&&e[c].match("/s/");)c+=1;return[e.substring(0,u),e.substring(c)]}return[e.substring(0,h),e.substring(h)]}},i=function(t,e,n){var r,i,a,s,u,h,c,l,f;for(f=e.split(/\r\n|\r|\n/g),a=[],r=0,i=f.length;r<i;r++)if(l=f[r],u=o(t,l,n),s=u[0],c=u[1],s)for(;s;)a.push(s),h=o(t,c,n),s=h[0],c=h[1];else a.push(l);return a},r=function(){function t(t,e,n,r,o){var s,u,h;this.text=e,this.font=n,this.forcedWidth=r,this.forcedHeight=o,h=a(this.font),s=h.fontFamily,u=h.fontSize,t.font=this.font,t.textBaseline="baseline",this.emDashWidth=t.measureTextWidth("—",u,s).width,this.caratWidth=t.measureTextWidth("|",u,s).width,this.lines=i(t,this.text,this.forcedWidth),this.metricses=this.lines.map(function(e){return function(n){return t.measureText2(n||"X",u,e.font)}}(this)),this.metrics={ascent:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.ascent})),descent:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.descent})),fontsize:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.fontsize})),leading:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.leading})),width:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.width})),height:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.height})),bounds:{minx:Math.min.apply(Math,this.metricses.map(function(t){var e;return e=t.bounds,e.minx})),miny:Math.min.apply(Math,this.metricses.map(function(t){var e;return e=t.bounds,e.miny})),maxx:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.bounds,e.maxx})),maxy:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.bounds,e.maxy}))}},this.boundingBoxWidth=Math.ceil(this.metrics.width)}return t.prototype.draw=function(t,e,n){var r,i,o,a,s,u;for(t.textBaseline="top",t.font=this.font,r=0,s=this.lines,u=[],i=0,o=s.length;i<o;i++)a=s[i],t.fillText(a,e,n+r*this.metrics.leading),u.push(r+=1);return u},t.prototype.getWidth=function(t){return null==t&&(t=!1),this.forcedWidth?this.forcedWidth:t?this.metrics.bounds.maxx+this.caratWidth:this.metrics.bounds.maxx},t.prototype.getHeight=function(){return this.forcedHeight||this.metrics.leading*this.lines.length},t}(),e.exports=r},{"./fontmetrics.js":8}],4:[function(t,e,n){var r,i;i=function(){function t(t,e,n){this.lc=t,this.oldShapes=e,this.newShapes=n}return t.prototype["do"]=function(){return this.lc.shapes=this.newShapes,this.lc.repaintLayer("main")},t.prototype.undo=function(){return this.lc.shapes=this.oldShapes,this.lc.repaintLayer("main")},t}(),r=function(){function t(t,e,n){this.lc=t,this.shape=e,this.previousShapeId=null!=n?n:null}return t.prototype["do"]=function(){var t,e,n,r,i,o;if(this.lc.shapes.length&&this.lc.shapes[this.lc.shapes.length-1].id!==this.previousShapeId&&null!==this.previousShapeId){for(r=[],t=!1,i=this.lc.shapes,e=0,n=i.length;e<n;e++)o=i[e],r.push(o),o.id===this.previousShapeId&&(r.push(this.shape),t=!0);t||r.push(this.shape),this.lc.shapes=r}else this.lc.shapes.push(this.shape);return this.lc.repaintLayer("main")},t.prototype.undo=function(){var t,e,n,r,i;if(this.lc.shapes[this.lc.shapes.length-1].id===this.shape.id)this.lc.shapes.pop();else{for(n=[],r=this.lc.shapes,t=0,e=r.length;t<e;t++)i=r[t],i.id!==this.shape.id&&n.push(i);lc.shapes=n}return this.lc.repaintLayer("main")},t}(),e.exports={ClearAction:i,AddShapeAction:r}},{}],5:[function(t,e,n){var r,i,o,a;o=function(t,e){var n,r,i;return r=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,n=t.getBoundingClientRect(),[r-n.left,i-n.top]},a=function(t,e){var n;return n=t.getBoundingClientRect(),{left:e.clientX-n.left,top:e.clientY-n.top}},i=function(t){return null!=t.buttons?1===t.buttons:t.which>0},e.exports=r=function(t,e,n){var r,i,s,u,h,c;return null==n&&(n=!1),c=[],i=function(n){return function(n){var r;return n.preventDefault(),r=a(e,n),t.pointerMove(r.left,r.top)}}(this),s=function(n){return function(n){var r;return n.preventDefault(),e.onselectstart=function(){return!0},r=a(e,n),t.pointerUp(r.left,r.top),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",s),e.addEventListener("mousemove",i)}}(this),e.addEventListener("mousedown",function(n){return function(n){var r,o;if("canvas"===n.target.tagName.toLowerCase())return r=!0,n.preventDefault(),e.onselectstart=function(){return!1},o=a(e,n),t.pointerDown(o.left,o.top),e.removeEventListener("mousemove",i),document.addEventListener("mousemove",i),document.addEventListener("mouseup",s)}}(this)),h=function(n){return n.preventDefault(),t.pointerMove.apply(t,o(e,n))},u=function(n){return n.preventDefault(),t.pointerUp.apply(t,o(e,n)),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",u),document.removeEventListener("touchcancel",u)},e.addEventListener("touchstart",function(n){if("canvas"===n.target.tagName.toLowerCase())return n.preventDefault(),1===n.touches.length?(t.pointerDown.apply(t,o(e,n)),document.addEventListener("touchmove",h),document.addEventListener("touchend",u),document.addEventListener("touchcancel",u)):t.pointerMove.apply(t,o(e,n))}),n&&(console.warn("Keyboard panning is deprecated."),r=function(e){switch(e.keyCode){case 37:t.pan(-10,0);break;case 38:t.pan(0,-10);break;case 39:t.pan(10,0);break;case 40:t.pan(0,10)}return t.repaintAllLayers()},document.addEventListener("keydown",r),c.push(function(){return document.removeEventListener(r)})),function(){var t,e,n,r;for(r=[],e=0,n=c.length;e<n;e++)t=c[e],r.push(t());return r}}},{}],6:[function(t,e,n){var r,i,o,a,s,u,h,c,l,f,p;h=t("./lineEndCapShapes"),p={},i=function(t,e,n){return p[t]={drawFunc:e,drawLatestFunc:n}},c=function(){},f=function(t,e,n){var r;if(null==n&&(n={}),null==n.shouldIgnoreUnsupportedShapes&&(n.shouldIgnoreUnsupportedShapes=!1),null==n.retryCallback&&(n.retryCallback=c),null==n.shouldOnlyDrawLatest&&(n.shouldOnlyDrawLatest=!1),null==n.bufferCtx&&(n.bufferCtx=null),r=n.bufferCtx,p[e.className])return n.shouldOnlyDrawLatest&&p[e.className].drawLatestFunc?p[e.className].drawLatestFunc(t,r,e,n.retryCallback):p[e.className].drawFunc(t,e,n.retryCallback);if(n.shouldIgnoreUnsupportedShapes)return console.warn("Can't render shape of type "+e.className+" to canvas");throw"Can't render shape of type "+e.className+" to canvas"},l=function(t,e,n){return f(t.getContext("2d"),e,n)},i("Rectangle",function(t,e){var n,r;return n=e.x,r=e.y,e.strokeWidth%2!==0&&(n+=.5,r+=.5),t.fillStyle=e.fillColor,t.fillRect(n,r,e.width,e.height),t.lineWidth=e.strokeWidth,t.strokeStyle=e.strokeColor,t.strokeRect(n,r,e.width,e.height)}),i("Ellipse",function(t,e){var n,r,i,o;return t.save(),o=Math.floor(e.width/2),i=Math.floor(e.height/2),n=e.x+o,r=e.y+i,t.translate(n,r),t.scale(1,Math.abs(e.height/e.width)),t.beginPath(),t.arc(0,0,Math.abs(o),0,2*Math.PI),t.closePath(),t.restore(),t.fillStyle=e.fillColor,t.fill(),t.lineWidth=e.strokeWidth,t.strokeStyle=e.strokeColor,t.stroke()}),i("Comment",function(t,e){var n,r,i,o;return t.save(),o=Math.floor(e.width/2),i=Math.floor(e.height/2),n=e.x+o,r=e.y+i,t.translate(n,r),
t.scale(1,Math.abs(e.height/e.width)),t.beginPath(),t.arc(0,0,Math.abs(o),0,2*Math.PI),t.closePath(),t.restore(),t.fillStyle=e.fillColor,t.fill(),t.lineWidth=e.strokeWidth,t.strokeStyle=e.strokeColor,t.stroke()}),i("SelectionBox",function(){var t;return t=function(t,e,n){var r,i;if(r=e.x,i=e.y,0!==n)return t.fillStyle="#fff",t.fillRect(r,i,n,n),t.strokeStyle="#000",t.strokeRect(r,i,n,n)},function(e,n){return t(e,n.getTopLeftHandleRect(),n.handleSize),t(e,n.getTopRightHandleRect(),n.handleSize),t(e,n.getBottomLeftHandleRect(),n.handleSize),t(e,n.getBottomRightHandleRect(),n.handleSize),n.backgroundColor&&(e.fillStyle=n.backgroundColor,e.fillRect(n._br.x-n.margin,n._br.y-n.margin,n._br.width+2*n.margin,n._br.height+2*n.margin)),e.lineWidth=1,e.strokeStyle="#000",e.setLineDash([2,4]),e.strokeRect(n._br.x-n.margin,n._br.y-n.margin,n._br.width+2*n.margin,n._br.height+2*n.margin),e.setLineDash([])}}()),i("Image",function(t,e,n){return e.image.width?1===e.scale?t.drawImage(e.image,e.x,e.y):t.drawImage(e.image,e.x,e.y,e.image.width*e.scale,e.image.height*e.scale):n?e.image.onload=n:void 0}),i("Line",function(t,e){var n,r,i,o,a;if(e.x1!==e.x2||e.y1!==e.y2)return r=e.x1,i=e.x2,o=e.y1,a=e.y2,e.strokeWidth%2!==0&&(r+=.5,i+=.5,o+=.5,a+=.5),t.lineWidth=e.strokeWidth,t.strokeStyle=e.color,t.lineCap=e.capStyle,e.dash&&t.setLineDash(e.dash),t.beginPath(),t.moveTo(r,o),t.lineTo(i,a),t.stroke(),e.dash&&t.setLineDash([]),n=Math.max(2.2*e.strokeWidth,5),e.endCapShapes[0]&&h[e.endCapShapes[0]].drawToCanvas(t,r,o,Math.atan2(o-a,r-i),n,e.color),e.endCapShapes[1]?h[e.endCapShapes[1]].drawToCanvas(t,i,a,Math.atan2(a-o,i-r),n,e.color):void 0}),r=function(t,e,n,r){var i,o,a,s;if(null==n&&(n=!1),null==r&&(r="round"),e.length){for(t.lineCap=r,t.strokeStyle=e[0].color,t.lineWidth=e[0].size,t.beginPath(),e[0].size%2===0?t.moveTo(e[0].x,e[0].y):t.moveTo(e[0].x+.5,e[0].y+.5),s=e.slice(1),i=0,o=s.length;i<o;i++)a=s[i],e[0].size%2===0?t.lineTo(a.x,a.y):t.lineTo(a.x+.5,a.y+.5);return n?t.closePath():void 0}},s=function(t,e){return r(t,e.smoothedPoints),t.stroke()},u=function(t,e,n){var i,o,a;return n.tail?(a=n.smoothedPoints.length-n.segmentSize*n.tailSize,o=a<2*n.segmentSize?0:a,i=a+n.segmentSize+1,r(e,n.smoothedPoints.slice(o,i)),e.stroke()):(r(e,n.smoothedPoints),e.stroke())},i("LinePath",s,u),o=function(t,e){return t.save(),t.globalCompositeOperation="destination-out",s(t,e),t.restore()},a=function(t,e,n){return t.save(),t.globalCompositeOperation="destination-out",e.save(),e.globalCompositeOperation="destination-out",u(t,e,n),t.restore(),e.restore()},i("ErasedLinePath",o,a),i("Text",function(t,e){return e.renderer||e._makeRenderer(t),t.fillStyle=e.color,e.renderer.draw(t,e.x,e.y)}),i("Polygon",function(t,e){return t.fillStyle=e.fillColor,r(t,e.points,e.isClosed,"butt"),t.fill(),t.stroke()}),e.exports={defineCanvasRenderer:i,renderShapeToCanvas:l,renderShapeToContext:f}},{"./lineEndCapShapes":9}],7:[function(t,e,n){"use strict";e.exports={imageURLPrefix:"lib/img",primaryColor:"hsla(0, 0%, 0%, 1)",secondaryColor:"hsla(0, 0%, 100%, 1)",backgroundColor:"transparent",strokeWidths:[1,2,5,10,20,30],defaultStrokeWidth:5,toolbarPosition:"top",keyboardShortcuts:!1,imageSize:{width:"infinite",height:"infinite"},backgroundShapes:[],watermarkImage:null,watermarkScale:1,zoomMin:.2,zoomMax:4,zoomStep:.2,snapshot:null,onInit:function(){},tools:[t("../tools/Pencil"),t("../tools/Eraser"),t("../tools/Line"),t("../tools/Rectangle"),t("../tools/Ellipse"),t("../tools/Text"),t("../tools/Polygon"),t("../tools/Pan"),t("../tools/Eyedropper"),t("../tools/Comment")]}},{"../tools/Comment":20,"../tools/Ellipse":21,"../tools/Eraser":22,"../tools/Eyedropper":23,"../tools/Line":24,"../tools/Pan":25,"../tools/Pencil":26,"../tools/Polygon":27,"../tools/Rectangle":28,"../tools/Text":30}],8:[function(t,e,n){"use strict";!function(){if(!document.defaultView.getComputedStyle)throw"ERROR: 'document.defaultView.getComputedStyle' not found. This library only works in browsers that can report computed CSS values.";CanvasRenderingContext2D.prototype.measureTextWidth=CanvasRenderingContext2D.prototype.measureText;var t=function(t,e){return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)};CanvasRenderingContext2D.prototype.measureText2=function(e,n,r){var i=this.measureTextWidth(e),o=!/\S/.test(e);i.fontsize=n;var a=document.createElement("div");a.style.position="absolute",a.style.opacity=0,a.style.font=r,a.innerHTML=e+"<br/>"+e,document.body.appendChild(a),i.leading=1.2*n;var s=t(a,"height");if(s=s.replace("px",""),s>=2*n&&(i.leading=s/2|0),document.body.removeChild(a),o)i.ascent=0,i.descent=0,i.bounds={minx:0,maxx:i.width,miny:0,maxy:0},i.height=0;else{var u=document.createElement("canvas"),h=100;u.width=i.width+h,u.height=3*n,u.style.opacity=1,u.style.font=r;var c=u.getContext("2d");c.font=r;var l=u.width,f=u.height,p=f/2;c.fillStyle="white",c.fillRect(-1,-1,l+2,f+2),c.fillStyle="black",c.fillText(e,h/2,p);for(var d=c.getImageData(0,0,l,f).data,g=0,y=4*l,v=d.length;++g<v&&255===d[g];);var m=g/y|0;for(g=v-1;--g>0&&255===d[g];);var _=g/y|0;for(g=0;g<v&&255===d[g];)g+=y,g>=v&&(g=g-v+4);var S=g%y/4|0,x=1;for(g=v-3;g>=0&&255===d[g];)g-=y,g<0&&(g=v-3-4*x++);var w=g%y/4+1|0;i.ascent=p-m,i.descent=_-p,i.bounds={minx:S-h/2,maxx:w-h/2,miny:0,maxy:_-m},i.height=1+(_-m)}return i}}()},{}],9:[function(t,e,n){e.exports={arrow:function(){var t;return t=function(t,e,n,r,i){return[{x:t+Math.cos(n+Math.PI/2)*r/2,y:e+Math.sin(n+Math.PI/2)*r/2},{x:t+Math.cos(n)*i,y:e+Math.sin(n)*i},{x:t+Math.cos(n-Math.PI/2)*r/2,y:e+Math.sin(n-Math.PI/2)*r/2}]},{drawToCanvas:function(e,n,r,i,o,a,s){var u;return null==s&&(s=0),s=s||o,e.fillStyle=a,e.lineWidth=0,e.strokeStyle="transparent",e.beginPath(),u=t(n,r,i,o,s),e.moveTo(u[0].x,u[0].y),e.lineTo(u[1].x,u[1].y),e.lineTo(u[2].x,u[2].y),e.fill()},svg:function(e,n,r,i,o,a){var s;return null==a&&(a=0),a=a||i,s=t(e,n,r,i,a),"<polygon fill='"+o+"' stroke='none' points='"+s.map(function(t){return t.x+","+t.y})+"' />"}}}()}},{}],10:[function(t,e,n){var r,i,o;o={},i=function(t){return o=t},r=function(t){var e;return e=o[t],e||t},e.exports={localize:i,_:r}},{}],11:[function(t,e,n){var r,i,o,a,s,u;r=t("./shapes").Point,u=t("./util"),o={},o.toPoly=function(t){var e,n,r,o,s,u,h;for(u=[],h=[],n=0,e=0,r=t.length;e<r;e++)s=t[e],o=a(s,i(t,n)),u=u.concat([o[0]]),h=[o[1]].concat(h),n+=1;return u.concat(h)},i=function(t,e){var n;return t.length<3&&(n={x:0,y:0}),n=0===e?i(t,e+1):e===t.length-1?i(t,e-1):o.diff(t[e-1],t[e+1])},o.diff=function(t,e){return{x:e.x-t.x,y:e.y-t.y}},s=function(t){var e;return e=o.len(t),{x:t.x/e,y:t.y/e}},a=function(t,e){return e=s(e),e.x=e.x*t.size/2,e.y=e.y*t.size/2,[{x:t.x-e.y,y:t.y+e.x,color:t.color},{x:t.x+e.y,y:t.y-e.x,color:t.color}]},o.len=function(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))},o.scalePositionScalar=function(t,e,n,r){var i,o;return o=e*n,i=e*r,t+(o-i)/2},e.exports=o},{"./shapes":14,"./util":16}],12:[function(t,e,n){var r,i,o,a;a=t("./util"),i=t("./shapes").JSONToShape,r="infinite",o=function(t,e,n){if(e.width)return t.save(),t.translate(t.canvas.width/2,t.canvas.height/2),t.scale(n,n),t.drawImage(e,-e.width/2,-e.height/2),t.restore()},e.exports=function(t,e){var n,s,u,h,c,l,f,p;return null==e&&(e={}),null==e.scale&&(e.scale=1),l=function(){var e,n,r,o;for(r=t.shapes,o=[],e=0,n=r.length;e<n;e++)c=r[e],o.push(i(c));return o}(),s=[],t.backgroundShapes&&(s=function(){var e,n,r,o;for(r=t.backgroundShapes,o=[],e=0,n=r.length;e<n;e++)c=r[e],o.push(i(c));return o}()),null==e.margin&&(e.margin={top:0,right:0,bottom:0,left:0}),h=t.imageSize||{width:r,height:r},u=t.colors||{background:"transparent"},n=l.concat(s),f=document.createElement("canvas"),p=f.getContext("2d"),e.rect?(e.rect.x-=e.margin.left,e.rect.y-=e.margin.top,e.rect.width+=e.margin.left+e.margin.right,e.rect.height+=e.margin.top+e.margin.bottom):e.rect=a.getDefaultImageRect(function(){var t,e,r;for(r=[],t=0,e=n.length;t<e;t++)c=n[t],r.push(c.getBoundingRect(p));return r}(),h,e.margin),f.width=e.rect.width*e.scale,f.height=e.rect.height*e.scale,p.fillStyle=u.background,p.fillRect(0,0,f.width,f.height),e.rect.width&&e.rect.height?(e.watermarkImage&&o(p,e.watermarkImage,e.watermarkScale),a.combineCanvases(f,a.renderShapes(s,e.rect,e.scale),a.renderShapes(l,e.rect,e.scale))):null}},{"./shapes":14,"./util":16}],13:[function(t,e,n){var r,i,o;o=t("./util"),i=t("./shapes").JSONToShape,r="infinite",e.exports=function(t,e){var n,a,s,u,h,c,l,f;return null==e&&(e={}),f=function(){var e,n,r,o;for(r=t.shapes,o=[],e=0,n=r.length;e<n;e++)l=r[e],o.push(i(l));return o}(),a=[],t.backgroundShapes&&(a=function(){var e,n,r,o;for(r=t.backgroundShapes,o=[],e=0,n=r.length;e<n;e++)l=r[e],o.push(i(l));return o}()),null==e.margin&&(e.margin={top:0,right:0,bottom:0,left:0}),c=t.imageSize||{width:r,height:r},s=t.colors||{background:"transparent"},n=f.concat(a),h=document.createElement("canvas"),u=h.getContext("2d"),e.rect?(e.rect.x-=e.margin.left,e.rect.y-=e.margin.top,e.rect.width+=e.margin.left+e.margin.right,e.rect.height+=e.margin.top+e.margin.bottom):e.rect=o.getDefaultImageRect(function(){var t,e,r;for(r=[],t=0,e=n.length;t<e;t++)l=n[t],r.push(l.getBoundingRect(u));return r}(),c,e.margin),LC.renderShapesToSVG(a.concat(f),e.rect,s.background)}},{"./shapes":14,"./util":16}],14:[function(t,e,n){var r,i,o,a,s,u,h,c,l,f,p,d,g,y,v,m,_,S,x,w,b,k;k=t("./util"),o=t("./TextRenderer"),y=t("./lineEndCapShapes"),m=t("./canvasRenderer"),p=m.defineCanvasRenderer,S=m.renderShapeToContext,_=t("./svgRenderer"),d=_.defineSVGRenderer,x=_.renderShapeToSVG,b={},g=function(t,e){var n,r,i,o,a,s,u,h;n=function(t,n,r,i,o,a,s,u,h,c,l,f,p,d,g,y){return e.constructor.call(this,t,n,r,i,o,a,s,u,h,c,l,f,p,d,g,y),this},n.prototype.className=t,n.fromJSON=e.fromJSON,e.draw&&(a=e.draw,s=e.draw||function(t,e,n){return this.draw(t,e,n)},r=function(t,e,n){return a.call(e,t,n)},i=function(t,e,n,r){return s.call(n,t,e,r)},delete e.draw,e.drawLatest&&delete e.drawLatest,p(t,r,i)),e.toSVG&&(u=e.toSVG,h=function(t){return u.call(t)},delete e.toSVG,d(t,h)),n.prototype.draw=function(t,e){return S(t,this,{retryCallback:e})},n.prototype.drawLatest=function(t,e,n){return S(t,this,{retryCallback:n,bufferCtx:e,shouldOnlyDrawLatest:!0})},n.prototype.toSVG=function(){return x(this)};for(o in e)"fromJSON"!==o&&(n.prototype[o]=e[o]);return b[t]=n,n},f=function(t,e,n,r,i,o,a,s,u,h,c,l,f,p,d,g,y){var v;return v=new b[t](e,n,r,i,o,a,s,u,h,c,l,f,p,d,g,y),e&&!e.id?v.id=k.getGUID():e&&e.id?v.id=e.id:v.id=k.getGUID(),v},r=function(t){var e,n,r,i;return e=t.className,n=t.data,r=t.id,r&&(n.id=r),e in b?(i=b[e].fromJSON(n),i?(r&&(i.id=r),i):(console.log("Unreadable shape:",e,n),null)):(console.log("Unknown shape:",e,n),null)},w=function(t){return{className:t.className,data:t.toJSON(),id:t.id}},l=function(t,e){return e?l(u(u(c(t))),e-1):t},c=function(t){var e,n,r,i,o;for(t=[t[0]].concat(t).concat(k.last(t)),o=[],e=0,i=0,n=t.length;i<n;i++)r=t[i],o[2*e]=r,t[e+1]&&(o[2*e+1]=h(r,t[e+1])),e+=1;return o},u=function(t){var e,n,r,i,o;for(e=[],n=0,o=0,r=t.length;o<r;o++)i=t[o],t[n+1]&&(e[n]=h(i,t[n+1])),n+=1;return e},h=function(t,e){return f("Point",{x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2,size:t.size+(e.size-t.size)/2,color:t.color})},g("Image",{constructor:function(t){return null==t&&(t={}),this.x=t.x||0,this.y=t.y||0,this.scale=t.scale||1,this.image=t.image||null},getBoundingRect:function(){return{x:this.x,y:this.y,width:this.image.width*this.scale,height:this.image.height*this.scale}},toJSON:function(){return{x:this.x,y:this.y,imageSrc:this.image.src,imageObject:this.image,scale:this.scale}},fromJSON:function(t){var e,n;return e=null,(null!=(n=t.imageObject)?n.width:void 0)?e=t.imageObject:(e=new Image,e.src=t.imageSrc),f("Image",{x:t.x,y:t.y,image:e,scale:t.scale})},move:function(t){return null==t&&(t={}),this.x=this.x-t.xDiff,this.y=this.y-t.yDiff},setUpperLeft:function(t){return null==t&&(t={}),this.x=t.x,this.y=t.y}}),g("Rectangle",{constructor:function(t){return null==t&&(t={}),this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0,this.strokeWidth=t.strokeWidth||1,this.strokeColor=t.strokeColor||"black",this.fillColor=t.fillColor||"transparent"},getBoundingRect:function(){return{x:this.x-this.strokeWidth/2,y:this.y-this.strokeWidth/2,width:this.width+this.strokeWidth,height:this.height+this.strokeWidth}},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,strokeWidth:this.strokeWidth,strokeColor:this.strokeColor,fillColor:this.fillColor}},fromJSON:function(t){return f("Rectangle",t)},move:function(t){return null==t&&(t={}),this.x=this.x-t.xDiff,this.y=this.y-t.yDiff},setUpperLeft:function(t){return null==t&&(t={}),this.x=t.x,this.y=t.y}}),g("Ellipse",{constructor:function(t){return null==t&&(t={}),this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0,this.name=t.name||"",this.id=t.id||null,this.strokeWidth=t.strokeWidth||1,this.strokeColor=t.strokeColor||"black",this.fillColor=t.fillColor||"transparent"},getBoundingRect:function(){return{x:this.x-this.strokeWidth/2,y:this.y-this.strokeWidth/2,width:this.width+this.strokeWidth,height:this.height+this.strokeWidth}},toJSON:function(){return{x:this.x,y:this.y,id:this.id,name:this.name,width:this.width,height:this.height,strokeWidth:this.strokeWidth,strokeColor:this.strokeColor,fillColor:this.fillColor}},fromJSON:function(t){return f("Ellipse",t)},move:function(t){return null==t&&(t={}),this.x=this.x-t.xDiff,this.y=this.y-t.yDiff},setUpperLeft:function(t){return null==t&&(t={}),this.x=t.x,this.y=t.y}}),g("Line",{constructor:function(t){return null==t&&(t={}),this.x1=t.x1||0,this.y1=t.y1||0,this.x2=t.x2||0,this.y2=t.y2||0,this.strokeWidth=t.strokeWidth||1,this.color=t.color||"black",this.capStyle=t.capStyle||"round",this.endCapShapes=t.endCapShapes||[null,null],this.dash=t.dash||null},getBoundingRect:function(){return{x:Math.min(this.x1,this.x2)-this.strokeWidth/2,y:Math.min(this.y1,this.y2)-this.strokeWidth/2,width:Math.abs(this.x2-this.x1)+this.strokeWidth/2,height:Math.abs(this.y2-this.y1)+this.strokeWidth/2}},toJSON:function(){return{x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2,strokeWidth:this.strokeWidth,color:this.color,capStyle:this.capStyle,dash:this.dash,endCapShapes:this.endCapShapes}},fromJSON:function(t){return f("Line",t)},move:function(t){return null==t&&(t={}),this.x1=this.x1-t.xDiff,this.y1=this.y1-t.yDiff,this.x2=this.x2-t.xDiff,this.y2=this.y2-t.yDiff},setUpperLeft:function(t){var e,n,r;return null==t&&(t={}),e=this.getBoundingRect(),n=e.x-t.x,r=e.y-t.y,this.move({xDiff:n,yDiff:r})}}),s=function(t){var e,n,r,i,o;if(!t.length)return!1;for(o=t[0].size,e=t[0].color,i=0,n=t.length;i<n;i++)if(r=t[i],r.size===o&&r.color===e||console.log(o,e,r.size,r.color),r.size!==o||r.color!==e)return!1;return!0},a=function(t,e){var n,i,o,a,s;return i=null,e.points?i=function(){var t,i,o,a;for(o=e.points,a=[],i=0,t=o.length;i<t;i++)n=o[i],a.push(r(n));return a}():e.pointCoordinatePairs&&(i=function(){var t,n,i,o,u;for(i=e.pointCoordinatePairs,u=[],n=0,t=i.length;n<t;n++)o=i[n],a=o[0],s=o[1],u.push(r({className:"Point",data:{x:a,y:s,size:e.pointSize,color:e.pointColor,smooth:e.smooth}}));return u}()),o=null,e.smoothedPointCoordinatePairs&&(o=function(){var t,n,i,o,u;for(i=e.smoothedPointCoordinatePairs,u=[],n=0,t=i.length;n<t;n++)o=i[n],a=o[0],s=o[1],u.push(r({className:"Point",data:{x:a,y:s,size:e.pointSize,color:e.pointColor,smooth:e.smooth}}));return u}()),i[0]?f(t,{points:i,smoothedPoints:o,order:e.order,tailSize:e.tailSize,smooth:e.smooth}):null},v={constructor:function(t){var e,n,r,i,o;if(null==t&&(t={}),r=t.points||[],this.order=t.order||3,this.tailSize=t.tailSize||3,this.smooth=!("smooth"in t)||t.smooth,this.segmentSize=Math.pow(2,this.order),this.sampleSize=this.tailSize+1,t.smoothedPoints)return this.points=t.points,this.smoothedPoints=t.smoothedPoints;for(this.points=[],o=[],i=0,e=r.length;i<e;i++)n=r[i],o.push(this.addPoint(n));return o},getBoundingRect:function(){return k.getBoundingRect(this.points.map(function(t){return{x:t.x-t.size/2,y:t.y-t.size/2,width:t.size,height:t.size}}))},toJSON:function(){var t,e;return s(this.points)?{order:this.order,tailSize:this.tailSize,smooth:this.smooth,pointCoordinatePairs:function(){var t,n,r,i;for(r=this.points,i=[],n=0,t=r.length;n<t;n++)e=r[n],i.push([e.x,e.y]);return i}.call(this),smoothedPointCoordinatePairs:function(){var t,n,r,i;for(r=this.smoothedPoints,i=[],n=0,t=r.length;n<t;n++)e=r[n],i.push([e.x,e.y]);return i}.call(this),pointSize:this.points[0].size,pointColor:this.points[0].color}:{order:this.order,tailSize:this.tailSize,smooth:this.smooth,points:function(){var e,n,r,i;for(r=this.points,i=[],n=0,e=r.length;n<e;n++)t=r[n],i.push(w(t));return i}.call(this)}},fromJSON:function(t){return a("LinePath",t)},addPoint:function(t){return this.points.push(t),this.smooth?!this.smoothedPoints||this.points.length<this.sampleSize?this.smoothedPoints=l(this.points,this.order):(this.tail=k.last(l(k.last(this.points,this.sampleSize),this.order),this.segmentSize*this.tailSize),this.smoothedPoints=this.smoothedPoints.slice(0,this.smoothedPoints.length-this.segmentSize*(this.tailSize-1)).concat(this.tail)):void(this.smoothedPoints=this.points)},move:function(t){var e,n,r,i;for(null==t&&(t={}),r=this.smooth?this.smoothedPoints:this.points,i=0,e=r.length;i<e;i++)n=r[i],n.move(t);return this.points=this.smoothedPoints},setUpperLeft:function(t){var e,n,r;return null==t&&(t={}),e=this.getBoundingRect(),n=e.x-t.x,r=e.y-t.y,this.move({xDiff:n,yDiff:r})}},i=g("LinePath",v),g("ErasedLinePath",{constructor:v.constructor,toJSON:v.toJSON,addPoint:v.addPoint,getBoundingRect:v.getBoundingRect,fromJSON:function(t){return a("ErasedLinePath",t)}}),g("Point",{constructor:function(t){return null==t&&(t={}),this.x=t.x||0,this.y=t.y||0,this.size=t.size||0,this.color=t.color||""},getBoundingRect:function(){return{x:this.x-this.size/2,y:this.y-this.size/2,width:this.size,height:this.size}},toJSON:function(){return{x:this.x,y:this.y,size:this.size,color:this.color}},fromJSON:function(t){return f("Point",t)},move:function(t){return null==t&&(t={}),this.x=this.x-t.xDiff,this.y=this.y-t.yDiff},setUpperLeft:function(t){return null==t&&(t={}),this.x=t.x,this.y=t.y}}),g("Polygon",{constructor:function(t){var e,n,r,i,o;for(null==t&&(t={}),this.points=t.points,this.fillColor=t.fillColor||"white",this.strokeColor=t.strokeColor||"black",this.strokeWidth=t.strokeWidth,this.dash=t.dash||null,null==t.isClosed&&(t.isClosed=!0),this.isClosed=t.isClosed,i=this.points,o=[],r=0,e=i.length;r<e;r++)n=i[r],n.color=this.strokeColor,o.push(n.size=this.strokeWidth);return o},addPoint:function(t,e){return this.points.push(LC.createShape("Point",{x:t,y:e}))},getBoundingRect:function(){return k.getBoundingRect(this.points.map(function(t){return t.getBoundingRect()}))},toJSON:function(){return{strokeWidth:this.strokeWidth,fillColor:this.fillColor,strokeColor:this.strokeColor,dash:this.dash,isClosed:this.isClosed,pointCoordinatePairs:this.points.map(function(t){return[t.x,t.y]})}},fromJSON:function(t){return t.points=t.pointCoordinatePairs.map(function(e){var n,r;return n=e[0],r=e[1],f("Point",{x:n,y:r,size:t.strokeWidth,color:t.strokeColor})}),f("Polygon",t)},move:function(t){var e,n,r,i,o;for(null==t&&(t={}),i=this.points,o=[],r=0,e=i.length;r<e;r++)n=i[r],o.push(n.move(t));return o},setUpperLeft:function(t){var e,n,r;return null==t&&(t={}),e=this.getBoundingRect(),n=e.x-t.x,r=e.y-t.y,this.move({xDiff:n,yDiff:r})}}),g("Text",{constructor:function(t){return null==t&&(t={}),this.x=t.x||0,this.y=t.y||0,this.v=t.v||0,this.text=t.text||"",this.color=t.color||"black",this.font=t.font||"18px sans-serif",this.forcedWidth=t.forcedWidth||null,this.forcedHeight=t.forcedHeight||null},_makeRenderer:function(t){if(t.lineHeight=1.2,this.renderer=new o(t,this.text,this.font,this.forcedWidth,this.forcedHeight),this.v<1)return console.log("repairing baseline"),this.v=1,this.x-=this.renderer.metrics.bounds.minx,this.y-=this.renderer.metrics.leading-this.renderer.metrics.descent},setText:function(t){return this.text=t,this.renderer=null},setFont:function(t){return this.font=t,this.renderer=null},setPosition:function(t,e){return this.x=t,this.y=e},setSize:function(t,e){return this.forcedWidth=Math.max(t,0),this.forcedHeight=Math.max(e,0),this.renderer=null},enforceMaxBoundingRect:function(t){var e,n,r;if(e=this.getBoundingRect(t.ctx),r={x:-t.position.x/t.scale,y:-t.position.y/t.scale,width:t.canvas.width/t.scale,height:t.canvas.height/t.scale},e.x+e.width>r.x+r.width)return n=e.x-r.x,this.forcedWidth=r.width-n-10,this.renderer=null},getBoundingRect:function(t,e){if(null==e&&(e=!1),!this.renderer){if(!t)throw"Must pass ctx if text hasn't been rendered yet";this._makeRenderer(t)}return{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.ceil(this.renderer.getWidth(!0)),height:Math.ceil(this.renderer.getHeight())}},toJSON:function(){return{x:this.x,y:this.y,text:this.text,color:this.color,font:this.font,forcedWidth:this.forcedWidth,forcedHeight:this.forcedHeight,v:this.v}},fromJSON:function(t){return f("Text",t)},move:function(t){return null==t&&(t={}),this.x=this.x-t.xDiff,this.y=this.y-t.yDiff},setUpperLeft:function(t){return null==t&&(t={}),this.x=t.x,this.y=t.y}}),g("Comment",{constructor:function(t){return null==t&&(t={}),this.x=t.x||0,this.y=t.y||0,this.id=t.id||null,this.name=t.name||"",this.width=t.width||0,this.height=t.height||0,this.strokeWidth=t.strokeWidth||2,this.strokeColor=t.strokeColor||"black",this.fillColor=t.fillColor||"transparent"},getBoundingRect:function(){return{x:this.x-this.strokeWidth/2,y:this.y-this.strokeWidth/2,width:this.width+this.strokeWidth,height:this.height+this.strokeWidth}},toJSON:function(){return{x:this.x,y:this.y,id:this.id,name:this.name,width:this.width,height:this.height,strokeWidth:this.strokeWidth,strokeColor:this.strokeColor,fillColor:this.fillColor}},fromJSON:function(t){return f("Ellipse",t)},move:function(t){return null==t&&(t={}),this.x=this.x-t.xDiff,this.y=this.y-t.yDiff},setUpperLeft:function(t){return null==t&&(t={}),this.x=t.x,this.y=t.y}}),g("SelectionBox",{constructor:function(t){return null==t&&(t={}),this.shape=t.shape,null!=t.handleSize?this.handleSize=t.handleSize:this.handleSize=10,this.margin=4,this.backgroundColor=t.backgroundColor||null,this._br=this.shape.getBoundingRect(t.ctx)},toJSON:function(){return{shape:w(this.shape),backgroundColor:this.backgroundColor}},fromJSON:function(t){var e,n,i,o;return o=t.shape,n=t.handleSize,i=t.margin,e=t.backgroundColor,f("SelectionBox",{shape:r(o),backgroundColor:e})},getTopLeftHandleRect:function(){return{x:this._br.x-this.handleSize-this.margin,y:this._br.y-this.handleSize-this.margin,width:this.handleSize,height:this.handleSize}},getBottomLeftHandleRect:function(){return{x:this._br.x-this.handleSize-this.margin,y:this._br.y+this._br.height+this.margin,width:this.handleSize,height:this.handleSize}},getTopRightHandleRect:function(){return{x:this._br.x+this._br.width+this.margin,y:this._br.y-this.handleSize-this.margin,width:this.handleSize,height:this.handleSize}},getBottomRightHandleRect:function(){return{x:this._br.x+this._br.width+this.margin,y:this._br.y+this._br.height+this.margin,width:this.handleSize,height:this.handleSize}},getBoundingRect:function(){return{x:this._br.x-this.margin,y:this._br.y-this.margin,width:this._br.width+2*this.margin,height:this._br.height+2*this.margin}}}),e.exports={defineShape:g,createShape:f,JSONToShape:r,shapeToJSON:w}},{"./TextRenderer":3,"./canvasRenderer":6,"./lineEndCapShapes":9,"./svgRenderer":15,"./util":16}],15:[function(t,e,n){var r,i,o,a;i=t("./lineEndCapShapes"),a={},r=function(t,e){return a[t]=e},o=function(t,e){if(null==e&&(e={}),null==e.shouldIgnoreUnsupportedShapes&&(e.shouldIgnoreUnsupportedShapes=!1),a[t.className])return a[t.className](t);if(e.shouldIgnoreUnsupportedShapes)return console.warn("Can't render shape of type "+t.className+" to SVG"),"";throw"Can't render shape of type "+t.className+" to SVG"},r("Rectangle",function(t){var e,n,r,i,o,a,s,u;return i=t.x,s=t.y,o=t.x+t.width,u=t.y+t.height,r=Math.min(i,o),a=Math.min(s,u),n=Math.max(i,o)-r,e=Math.max(s,u)-a,t.strokeWidth%2!==0&&(r+=.5,a+=.5),"<rect x='"+r+"' y='"+a+"' width='"+n+"' height='"+e+"' stroke='"+t.strokeColor+"' fill='"+t.fillColor+"' stroke-width='"+t.strokeWidth+"' />"}),r("SelectionBox",function(t){return""}),r("Ellipse",function(t){var e,n,r,i;return i=Math.floor(t.width/2),r=Math.floor(t.height/2),e=t.x+i,n=t.y+r,"<ellipse cx='"+e+"' cy='"+n+"' rx='"+Math.abs(i)+"' ry='"+Math.abs(r)+"' stroke='"+t.strokeColor+"' fill='"+t.fillColor+"' stroke-width='"+t.strokeWidth+"' />"}),r("Image",function(t){return"<image x='"+t.x+"' y='"+t.y+"' width='"+t.image.naturalWidth*t.scale+"' height='"+t.image.naturalHeight*t.scale+"' xlink:href='"+t.image.src+"' />"}),r("Line",function(t){var e,n,r,o,a,s,u;return r=t.dash?"stroke-dasharray='"+t.dash.join(", ")+"'":"",n="",e=Math.max(2.2*t.strokeWidth,5),o=t.x1,a=t.x2,s=t.y1,u=t.y2,t.strokeWidth%2!==0&&(o+=.5,a+=.5,s+=.5,u+=.5),t.endCapShapes[0]&&(n+=i[t.endCapShapes[0]].svg(o,s,Math.atan2(s-u,o-a),e,t.color)),t.endCapShapes[1]&&(n+=i[t.endCapShapes[1]].svg(a,u,Math.atan2(u-s,a-o),e,t.color)),"<g> <line x1='"+o+"' y1='"+s+"' x2='"+a+"' y2='"+u+"' "+r+" stroke-linecap='"+t.capStyle+"' stroke='"+t.color+"' stroke-width='"+t.strokeWidth+"' /> "+n+" </g>"}),r("LinePath",function(t){return"<polyline fill='none' points='"+t.smoothedPoints.map(function(t){var e;return e=t.strokeWidth%2===0?0:.5,t.x+e+","+(t.y+e)}).join(" ")+"' stroke='"+t.points[0].color+"' stroke-linecap='round' stroke-width='"+t.points[0].size+"' />"}),r("ErasedLinePath",function(t){return""}),r("Polygon",function(t){return t.isClosed?"<polygon fill='"+t.fillColor+"' points='"+t.points.map(function(t){var e;return e=t.strokeWidth%2===0?0:.5,t.x+e+","+(t.y+e)}).join(" ")+"' stroke='"+t.strokeColor+"' stroke-width='"+t.strokeWidth+"' />":"<polyline fill='"+t.fillColor+"' points='"+t.points.map(function(t){var e;return e=t.strokeWidth%2===0?0:.5,t.x+e+","+(t.y+e)}).join(" ")+"' stroke='none' /> <polyline fill='none' points='"+t.points.map(function(t){var e;return e=t.strokeWidth%2===0?0:.5,t.x+e+","+(t.y+e)}).join(" ")+"' stroke='"+t.strokeColor+"' stroke-width='"+t.strokeWidth+"' />"}),r("Text",function(t){var e,n,r;return r=t.forcedWidth?"width='"+t.forcedWidth+"px'":"",e=t.forcedHeight?"height='"+t.forcedHeight+"px'":"",n=t.text.split(/\r\n|\r|\n/g),t.renderer&&(n=t.renderer.lines),"<text x='"+t.x+"' y='"+t.y+"' "+r+" "+e+" fill='"+t.color+"' style='font: "+t.font+";'> "+n.map(function(e){return function(e,n){var r;return r=0===n?0:"1.2em","<tspan x='"+t.x+"' dy='"+r+"' alignment-baseline='text-before-edge'> "+e+" </tspan>"}}(this)).join("")+" </text>"}),e.exports={defineSVGRenderer:r,renderShapeToSVG:o}},{"./lineEndCapShapes":9}],16:[function(t,e,n){var r,i,o,a,s=[].slice;o=Array.prototype.slice,r=t("./canvasRenderer").renderShapeToContext,i=t("./svgRenderer").renderShapeToSVG,a={addImageOnload:function(t,e){var n;return n=t.onload,t.onload=function(){return"function"==typeof n&&n(),e()},t},last:function(t,e){return null==e&&(e=null),e?o.call(t,Math.max(t.length-e,0)):t[t.length-1]},classSet:function(t){var e,n;e=[];for(n in t)t[n]&&e.push(n);return e.join(" ")},matchElementSize:function(t,e,n,r){var i;return null==r&&(r=function(){}),i=function(i){return function(){var i,o,a;for(o=0,a=e.length;o<a;o++)i=e[o],i.style.width=t.offsetWidth+"px",i.style.height=t.offsetHeight+"px",null!=i.width&&(i.setAttribute("width",i.offsetWidth*n),i.setAttribute("height",i.offsetHeight*n));return r()}}(this),t.addEventListener("resize",i),window.addEventListener("resize",i),window.addEventListener("orientationchange",i),i(),i},combineCanvases:function(){var t,e,n,r,i,o,a,u;for(n=1<=arguments.length?s.call(arguments,0):[],t=document.createElement("canvas"),t.width=n[0].width,t.height=n[0].height,i=0,a=n.length;i<a;i++)e=n[i],t.width=Math.max(e.width,t.width),t.height=Math.max(e.height,t.height);for(r=t.getContext("2d"),o=0,u=n.length;o<u;o++)e=n[o],r.drawImage(e,0,0);return t},renderShapes:function(t,e,n,i){var o,a,s,u;for(null==n&&(n=1),null==i&&(i=null),i=i||document.createElement("canvas"),i.width=e.width*n,i.height=e.height*n,o=i.getContext("2d"),o.translate(-e.x*n,-e.y*n),o.scale(n,n),a=0,s=t.length;a<s;a++)u=t[a],r(o,u);return i},renderShapesToSVG:function(t,e,n){var r,o,a,s;return a=e.x,s=e.y,o=e.width,r=e.height,("<svg xmlns='http://www.w3.org/2000/svg' width='"+o+"' height='"+r+"' viewBox='0 0 "+o+" "+r+"'> <rect width='"+o+"' height='"+r+"' x='0' y='0' fill='"+n+"' /> <g transform='translate("+-a+", "+-s+")'> "+t.map(i).join("")+" </g> </svg>").replace(/(\r\n|\n|\r)/gm,"")},getBoundingRect:function(t,e,n){var r,i,o,a,s,u,h;if(!t.length)return{x:0,y:0,width:e,height:n};for(s=t[0].x,u=t[0].y,o=t[0].x+t[0].width,a=t[0].y+t[0].height,r=0,i=t.length;r<i;r++)h=t[r],s=Math.floor(Math.min(h.x,s)),u=Math.floor(Math.min(h.y,u)),o=Math.ceil(Math.max(o,h.x+h.width)),a=Math.ceil(Math.max(a,h.y+h.height));return s=e?0:s,u=n?0:u,o=e||o,a=n||a,{x:s,y:u,width:o-s,height:a-u}},getDefaultImageRect:function(t,e,n){var r,i,o;return null==e&&(e={width:0,height:0}),null==n&&(n={top:0,right:0,bottom:0,left:0}),o=e.width,r=e.height,i=a.getBoundingRect(t,"infinite"===o?0:o,"infinite"===r?0:r),i.x-=n.left,i.y-=n.top,i.width+=n.left+n.right,i.height+=n.top+n.bottom,i},getBackingScale:function(t){return null==window.devicePixelRatio?1:window.devicePixelRatio>1?window.devicePixelRatio:1},requestAnimationFrame:(window.requestAnimationFrame||window.setTimeout).bind(window),getGUID:function(){var t;return t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(),requestAnimationFrame:function(t){return window.requestAnimationFrame?window.requestAnimationFrame(t):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(t):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(t):setTimeout(t,0)},cancelAnimationFrame:function(t){return window.cancelAnimationFrame?window.cancelAnimationFrame(t):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(t):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(t):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(t):clearTimeout(t)}},e.exports=a},{"./canvasRenderer":6,"./svgRenderer":15}],17:[function(t,e,n){"use strict";!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.CustomEvent.prototype,window.CustomEvent=t}()},{}],18:[function(t,e,n){"use strict";var r=!1;CanvasRenderingContext2D.prototype.setLineDash||(CanvasRenderingContext2D.prototype.setLineDash=function(){r||(console.warn("context2D.setLineDash is a no-op in this browser."),r=!0)}),e.exports=null},{}],19:[function(t,e,n){var r,i,o,a,s,u,h,c,l,f,p,d,g,y,v,m,_,S;t("./ie_customevent"),t("./ie_setLineDash"),r=t("./core/LiterallyCanvas"),u=t("./core/defaultOptions"),o=t("./core/canvasRenderer"),m=t("./core/svgRenderer"),v=t("./core/shapes"),S=t("./core/util"),d=t("./core/renderSnapshotToImage"),g=t("./core/renderSnapshotToSVG"),f=t("./core/localization").localize,a={snapshotToShapes:function(t){var e,n,r,i,o;for(r=t.shapes,i=[],e=0,n=r.length;e<n;e++)o=r[e],i.push(v.JSONToShape(o));return i},snapshotJSONToShapes:function(t){return a.snapshotToShapes(JSON.parse(t))}},i=t("./tools/base"),_={Pencil:t("./tools/Pencil"),Eraser:t("./tools/Eraser"),Line:t("./tools/Line"),Rectangle:t("./tools/Rectangle"),Ellipse:t("./tools/Ellipse"),Text:t("./tools/Text"),Polygon:t("./tools/Polygon"),Pan:t("./tools/Pan"),Eyedropper:t("./tools/Eyedropper"),SelectShape:t("./tools/SelectShape"),Comment:t("./tools/Comment"),Tool:i.Tool,ToolWithStroke:i.ToolWithStroke},h=u.tools,s=u.imageURLPrefix,y=function(t){return s=t,u.imageURLPrefix=t},c=function(t,e){var n,r,i,o,a;null==e&&(e={});for(o in u)o in e||(e[o]=u[o]);
for(a=t.children,r=0,i=a.length;r<i;r++)n=a[r],t.removeChild(n);return l(t,e)},l=function(t,e){var n,i,o;return o=t.className,[" "," "].join(t.className).indexOf(" literally ")===-1&&(t.className=t.className+" literally"),t.className.includes("toolbar-hidden")===!1&&(t.className=t.className+" toolbar-hidden"),n=document.createElement("div"),n.className="lc-drawing",t.appendChild(n),i=new r(n,e),i.teardown=function(){var e,n,r,a;for(i._teardown(),a=t.children,n=0,r=a.length;n<r;n++)e=a[n],t.removeChild(e);return t.className=o},"onInit"in e&&e.onInit(i),i},p=function(t){return t.fn.literallycanvas=function(t){return null==t&&(t={}),this.each(function(e){return function(e,n){return n.literallycanvas=c(n,t)}}(this)),this}},"undefined"!=typeof window&&(window.LC={init:c},window.$&&p(window.$)),e.exports={init:c,registerJQueryPlugin:p,util:S,tools:_,setDefaultImageURLPrefix:y,defaultTools:h,defineShape:v.defineShape,createShape:v.createShape,JSONToShape:v.JSONToShape,shapeToJSON:v.shapeToJSON,defineCanvasRenderer:o.defineCanvasRenderer,renderShapeToContext:o.renderShapeToContext,renderShapeToCanvas:o.renderShapeToCanvas,renderShapesToCanvas:S.renderShapes,defineSVGRenderer:m.defineSVGRenderer,renderShapeToSVG:m.renderShapeToSVG,renderShapesToSVG:S.renderShapesToSVG,snapshotToShapes:a.snapshotToShapes,snapshotJSONToShapes:a.snapshotJSONToShapes,renderSnapshotToImage:d,renderSnapshotToSVG:g,localize:f}},{"./core/LiterallyCanvas":2,"./core/canvasRenderer":6,"./core/defaultOptions":7,"./core/localization":10,"./core/renderSnapshotToImage":12,"./core/renderSnapshotToSVG":13,"./core/shapes":14,"./core/svgRenderer":15,"./core/util":16,"./ie_customevent":17,"./ie_setLineDash":18,"./tools/Comment":20,"./tools/Ellipse":21,"./tools/Eraser":22,"./tools/Eyedropper":23,"./tools/Line":24,"./tools/Pan":25,"./tools/Pencil":26,"./tools/Polygon":27,"./tools/Rectangle":28,"./tools/SelectShape":29,"./tools/Text":30,"./tools/base":31}],20:[function(t,e,n){var r,i,o,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./base").ToolWithStroke,o=t("../core/shapes").createShape,e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Comment",e.prototype.iconName="Comment",e.prototype.optionsStyle="null",e.prototype.begin=function(t,e,n){return t-=7,e-=7,this.currentShape=o("Comment",{x:t,y:e,5:5,name:this.name,strokeColor:"hsla(0, 100%, 42%, 1)",fillColor:"hsla(0, 100%, 64%, 1)"}),this.currentShape.width=14,this.currentShape.height=14,n.backgroundShapes.push(this.currentShape),n.repaintLayer("background"),n.trigger("drawingChange")},e}(i)},{"../core/shapes":14,"./base":31}],21:[function(t,e,n){var r,i,o,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./base").ToolWithStroke,o=t("../core/shapes").createShape,e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Ellipse",e.prototype.iconName="ellipse",e.prototype.begin=function(t,e,n){return this.currentShape=o("Ellipse",{x:t,y:e,strokeWidth:this.strokeWidth,strokeColor:n.getColor("primary"),fillColor:n.getColor("secondary")})},e.prototype["continue"]=function(t,e,n){return this.currentShape.width=t-this.currentShape.x,this.currentShape.height=e-this.currentShape.y,n.drawShapeInProgress(this.currentShape)},e.prototype.end=function(t,e,n){return n.saveShape(this.currentShape)},e}(i)},{"../core/shapes":14,"./base":31}],22:[function(t,e,n){var r,i,o,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./Pencil"),o=t("../core/shapes").createShape,e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Eraser",e.prototype.iconName="eraser",e.prototype.makePoint=function(t,e,n){return o("Point",{x:t,y:e,size:this.strokeWidth,color:"#000"})},e.prototype.makeShape=function(){return o("ErasedLinePath")},e}(i)},{"../core/shapes":14,"./Pencil":26}],23:[function(t,e,n){var r,i,o,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./base").Tool,o=function(t,e){var n,r,i;return r=e.x,i=e.y,n=t.getImageData(r,i,1,1).data,n[3]?"rgb("+n[0]+", "+n[1]+", "+n[2]+")":null},e.exports=r=function(t){function e(t){e.__super__.constructor.call(this,t),this.strokeOrFill="stroke"}return a(e,t),e.prototype.name="Eyedropper",e.prototype.iconName="eyedropper",e.prototype.optionsStyle="stroke-or-fill",e.prototype.readColor=function(t,e,n){var r,i,a,s;return s=n.getDefaultImageRect(),r=n.getImage(),a=o(r.getContext("2d"),{x:t-s.x,y:e-s.y}),i=a||n.getColor("background"),"stroke"===this.strokeOrFill?n.setColor("primary",a):n.setColor("secondary",a)},e.prototype.begin=function(t,e,n){return this.readColor(t,e,n)},e.prototype["continue"]=function(t,e,n){return this.readColor(t,e,n)},e}(i)},{"./base":31}],24:[function(t,e,n){var r,i,o,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./base").ToolWithStroke,o=t("../core/shapes").createShape,e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Line",e.prototype.iconName="line",e.prototype.optionsStyle="line-options-and-stroke-width",e.prototype.begin=function(t,e,n){return this.currentShape=o("Line",{x1:t,y1:e,x2:t,y2:e,strokeWidth:this.strokeWidth,dash:function(){switch(!1){case!this.isDashed:return[2*this.strokeWidth,4*this.strokeWidth];default:return null}}.call(this),endCapShapes:this.hasEndArrow?[null,"arrow"]:null,color:n.getColor("primary")})},e.prototype["continue"]=function(t,e,n){return this.currentShape.x2=t,this.currentShape.y2=e,n.drawShapeInProgress(this.currentShape)},e.prototype.end=function(t,e,n){return n.saveShape(this.currentShape)},e}(i)},{"../core/shapes":14,"./base":31}],25:[function(t,e,n){var r,i,o,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./base").Tool,o=t("../core/shapes").createShape,e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Pan",e.prototype.iconName="pan",e.prototype.usesSimpleAPI=!1,e.prototype.didBecomeActive=function(t){var e;return e=[],this.unsubscribe=function(t){return function(){var t,n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(t());return i}}(this),e.push(t.on("lc-pointerdown",function(e){return function(n){var r,i;return r=n.rawX,i=n.rawY,e.oldPosition=t.position,e.pointerStart={x:r,y:i}}}(this))),e.push(t.on("lc-pointerdrag",function(e){return function(n){var r,i,o;return i=n.rawX,o=n.rawY,r={x:(i-e.pointerStart.x)*t.backingScale,y:(o-e.pointerStart.y)*t.backingScale},t.setPan(e.oldPosition.x+r.x,e.oldPosition.y+r.y)}}(this)))},e.prototype.willBecomeInactive=function(t){return this.unsubscribe()},e}(i)},{"../core/shapes":14,"./base":31}],26:[function(t,e,n){var r,i,o,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./base").ToolWithStroke,o=t("../core/shapes").createShape,e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Pencil",e.prototype.iconName="pencil",e.prototype.eventTimeThreshold=10,e.prototype.begin=function(t,e,n){return this.color=n.getColor("primary"),this.currentShape=this.makeShape(),this.currentShape.addPoint(this.makePoint(t,e,n)),this.lastEventTime=Date.now()},e.prototype["continue"]=function(t,e,n){var r;if(r=Date.now()-this.lastEventTime,r>this.eventTimeThreshold)return this.lastEventTime+=r,this.currentShape.addPoint(this.makePoint(t,e,n)),n.drawShapeInProgress(this.currentShape)},e.prototype.end=function(t,e,n){return n.saveShape(this.currentShape),this.currentShape=void 0},e.prototype.makePoint=function(t,e,n){return o("Point",{x:t,y:e,size:this.strokeWidth,color:this.color})},e.prototype.makeShape=function(){return o("LinePath")},e}(i)},{"../core/shapes":14,"./base":31}],27:[function(t,e,n){var r,i,o,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./base").ToolWithStroke,o=t("../core/shapes").createShape,e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Polygon",e.prototype.iconName="polygon",e.prototype.usesSimpleAPI=!1,e.prototype.didBecomeActive=function(t){var n,r,i,o,a,s,u;return e.__super__.didBecomeActive.call(this,t),u=[],this.polygonUnsubscribe=function(t){return function(){var t,e,n,r;for(r=[],e=0,n=u.length;e<n;e++)t=u[e],r.push(t());return r}}(this),this.points=null,this.maybePoint=null,i=function(e){return function(){return e._getWillFinish()?e._close(t):(t.trigger("lc-polygon-started"),e.points?e.points.push(e.maybePoint):e.points=[e.maybePoint],e.maybePoint={x:e.maybePoint.x,y:e.maybePoint.y},t.setShapesInProgress(e._getShapes(t)),t.repaintLayer("main"))}}(this),r=function(e){return function(n){var r,i;if(r=n.x,i=n.y,e.maybePoint)return e.maybePoint.x=r,e.maybePoint.y=i,t.setShapesInProgress(e._getShapes(t)),t.repaintLayer("main")}}(this),n=function(e){return function(n){var r,i;return r=n.x,i=n.y,e.maybePoint={x:r,y:i},t.setShapesInProgress(e._getShapes(t)),t.repaintLayer("main")}}(this),s=function(e){return function(){return e.maybePoint={x:Infinity,y:Infinity},e._close(t)}}(this),a=function(e){return function(){return e.maybePoint=e.points[0],e._close(t)}}(this),o=function(e){return function(){return e._cancel(t)}}(this),u.push(t.on("drawingChange",function(e){return function(){return e._cancel(t)}}(this))),u.push(t.on("lc-pointerdown",n)),u.push(t.on("lc-pointerdrag",r)),u.push(t.on("lc-pointermove",r)),u.push(t.on("lc-pointerup",i)),u.push(t.on("lc-polygon-finishopen",s)),u.push(t.on("lc-polygon-finishclosed",a)),u.push(t.on("lc-polygon-cancel",o))},e.prototype.willBecomeInactive=function(t){return e.__super__.willBecomeInactive.call(this,t),(this.points||this.maybePoint)&&this._cancel(t),this.polygonUnsubscribe()},e.prototype._getArePointsClose=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)<10},e.prototype._getWillClose=function(){return!!(this.points&&this.points.length>1)&&(!!this.maybePoint&&this._getArePointsClose(this.points[0],this.maybePoint))},e.prototype._getWillFinish=function(){return!!(this.points&&this.points.length>1)&&(!!this.maybePoint&&(this._getArePointsClose(this.points[0],this.maybePoint)||this._getArePointsClose(this.points[this.points.length-1],this.maybePoint)))},e.prototype._cancel=function(t){return t.trigger("lc-polygon-stopped"),this.maybePoint=null,this.points=null,t.setShapesInProgress([]),t.repaintLayer("main")},e.prototype._close=function(t){return t.trigger("lc-polygon-stopped"),t.setShapesInProgress([]),this.points.length>2&&t.saveShape(this._getShape(t,!1)),this.maybePoint=null,this.points=null},e.prototype._getShapes=function(t,e){var n;return null==e&&(e=!0),n=this._getShape(t,e),n?[n]:[]},e.prototype._getShape=function(t,e){var n;return null==e&&(e=!0),n=[],this.points&&(n=n.concat(this.points)),!e&&n.length<3?null:(e&&this.maybePoint&&n.push(this.maybePoint),n.length>1?o("Polygon",{isClosed:this._getWillClose(),strokeColor:t.getColor("primary"),fillColor:t.getColor("secondary"),strokeWidth:this.strokeWidth,points:n.map(function(t){return o("Point",t)})}):null)},e.prototype.optionsStyle="polygon-and-stroke-width",e}(i)},{"../core/shapes":14,"./base":31}],28:[function(t,e,n){var r,i,o,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./base").ToolWithStroke,o=t("../core/shapes").createShape,e.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Rectangle",e.prototype.iconName="rectangle",e.prototype.begin=function(t,e,n){return this.currentShape=o("Rectangle",{x:t,y:e,strokeWidth:this.strokeWidth,strokeColor:n.getColor("primary"),fillColor:n.getColor("secondary")})},e.prototype["continue"]=function(t,e,n){return this.currentShape.width=t-this.currentShape.x,this.currentShape.height=e-this.currentShape.y,n.drawShapeInProgress(this.currentShape)},e.prototype.end=function(t,e,n){return n.saveShape(this.currentShape)},e}(i)},{"../core/shapes":14,"./base":31}],29:[function(t,e,n){var r,i,o,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=t("./base").Tool,o=t("../core/shapes").createShape,e.exports=r=function(t){function e(t){this.selectCanvas=document.createElement("canvas"),this.selectCanvas.style["background-color"]="transparent",this.selectCtx=this.selectCanvas.getContext("2d")}return a(e,t),e.prototype.name="SelectShape",e.prototype.usesSimpleAPI=!1,e.prototype.didBecomeActive=function(t){var e,n,r,i;return i=[],this._selectShapeUnsubscribe=function(t){return function(){var t,e,n,r;for(r=[],e=0,n=i.length;e<n;e++)t=i[e],r.push(t());return r}}(this),e=function(e){return function(n){var r,i,a,s;if(a=n.x,s=n.y,e.didDrag=!1,i=e._getPixel(a,s,t,e.selectCtx),e.selectedShape=t.shapes[i],null!=e.selectedShape)return t.trigger("shapeSelected",{selectedShape:e.selectedShape}),t.setShapesInProgress([e.selectedShape,o("SelectionBox",{shape:e.selectedShape,handleSize:0})]),t.repaintLayer("main"),r=e.selectedShape.getBoundingRect(),e.dragOffset={x:a-r.x,y:s-r.y}}}(this),n=function(e){return function(n){var r,i;if(r=n.x,i=n.y,null!=e.selectedShape)return e.didDrag=!0,e.selectedShape.setUpperLeft({x:r-e.dragOffset.x,y:i-e.dragOffset.y}),t.setShapesInProgress([e.selectedShape,o("SelectionBox",{shape:e.selectedShape,handleSize:0})]),t.repaintLayer("main")}}(this),r=function(e){return function(n){var r,i;if(r=n.x,i=n.y,e.didDrag)return e.didDrag=!1,t.trigger("shapeMoved",{shape:e.selectedShape}),t.trigger("drawingChange",{}),t.repaintLayer("main"),e._drawSelectCanvas(t)}}(this),i.push(t.on("lc-pointerdown",e)),i.push(t.on("lc-pointerdrag",n)),i.push(t.on("lc-pointerup",r)),this._drawSelectCanvas(t)},e.prototype.willBecomeInactive=function(t){return this._selectShapeUnsubscribe(),t.setShapesInProgress([])},e.prototype._drawSelectCanvas=function(t){var e;return this.selectCanvas.width=t.canvas.width,this.selectCanvas.height=t.canvas.height,this.selectCtx.clearRect(0,0,this.selectCanvas.width,this.selectCanvas.height),e=t.shapes.map(function(t){return function(e,n){return o("SelectionBox",{shape:e,handleSize:0,backgroundColor:"#"+t._intToHex(n)})}}(this)),t.draw(e,this.selectCtx)},e.prototype._intToHex=function(t){return("000000"+t.toString(16)).slice(-6)},e.prototype._getPixel=function(t,e,n,r){var i,o;return i=n.drawingCoordsToClientCoords(t,e),o=r.getImageData(i.x,i.y,1,1).data,o[3]?parseInt(this._rgbToHex(o[0],o[1],o[2]),16):null},e.prototype._componentToHex=function(t){var e;return e=t.toString(16),("0"+e).slice(-2)},e.prototype._rgbToHex=function(t,e,n){return""+this._componentToHex(t)+this._componentToHex(e)+this._componentToHex(n)},e}(i)},{"../core/shapes":14,"./base":31}],30:[function(t,e,n){var r,i,o,a,s=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;i=t("./base").Tool,o=t("../core/shapes").createShape,a=function(t,e){return!(t.x<e.x)&&(!(t.y<e.y)&&(!(t.x>e.x+e.width)&&!(t.y>e.y+e.height)))},e.exports=r=function(t){function e(){this.text="",this.font="bold 18px sans-serif",this.currentShape=null,this.currentShapeState=null,this.initialShapeBoundingRect=null,this.dragAction=null,this.didDrag=!1}return s(e,t),e.prototype.name="Text",e.prototype.iconName="text",e.prototype.didBecomeActive=function(t){var e,n,r;return n=[],this.unsubscribe=function(t){return function(){var t,e,r,i;for(i=[],e=0,r=n.length;e<r;e++)t=n[e],i.push(t());return i}}(this),e=function(e){return function(){return e._ensureNotEditing(t),e._clearCurrentShape(t),t.repaintLayer("main")}}(this),r=function(e){return function(){return e._updateInputEl(t)}}(this),n.push(t.on("drawingChange",e)),n.push(t.on("zoom",r)),n.push(t.on("imageSizeChange",r)),n.push(t.on("snapshotLoad",function(e){return function(){return e._clearCurrentShape(t),t.repaintLayer("main")}}(this))),n.push(t.on("primaryColorChange",function(e){return function(n){if(e.currentShape)return e.currentShape.color=n,e._updateInputEl(t),t.repaintLayer("main")}}(this))),n.push(t.on("setFont",function(e){return function(n){if(e.currentShape)return e.font=n,e.currentShape.setFont(n),e._setShapesInProgress(t),e._updateInputEl(t),t.repaintLayer("main")}}(this)))},e.prototype.willBecomeInactive=function(t){return this.currentShape&&(this._ensureNotEditing(t),this.commit(t)),this.unsubscribe()},e.prototype.setText=function(t){return this.text=t},e.prototype._ensureNotEditing=function(t){if("editing"===this.currentShapeState)return this._exitEditingState(t)},e.prototype._clearCurrentShape=function(t){return this.currentShape=null,this.initialShapeBoundingRect=null,this.currentShapeState=null,t.setShapesInProgress([])},e.prototype.commit=function(t){return this.currentShape.text&&t.saveShape(this.currentShape),this._clearCurrentShape(t),t.repaintLayer("main")},e.prototype._getSelectionShape=function(t,e){return null==e&&(e=null),o("SelectionBox",{shape:this.currentShape,ctx:t,backgroundColor:e})},e.prototype._setShapesInProgress=function(t){switch(this.currentShapeState){case"selected":return t.setShapesInProgress([this._getSelectionShape(t.ctx),this.currentShape]);case"editing":return t.setShapesInProgress([this._getSelectionShape(t.ctx,"#fff")]);default:return t.setShapesInProgress([this.currentShape])}},e.prototype.begin=function(t,e,n){var r,i,s,u;return this.dragAction="none",this.didDrag=!1,"selected"===this.currentShapeState||"editing"===this.currentShapeState?(r=this.currentShape.getBoundingRect(n.ctx),u=this._getSelectionShape(n.ctx),s=u.getBoundingRect(),i={x:t,y:e},a(i,r)&&(this.dragAction="move"),a(i,u.getBottomRightHandleRect())&&(this.dragAction="resizeBottomRight"),a(i,u.getTopLeftHandleRect())&&(this.dragAction="resizeTopLeft"),a(i,u.getBottomLeftHandleRect())&&(this.dragAction="resizeBottomLeft"),a(i,u.getTopRightHandleRect())&&(this.dragAction="resizeTopRight"),"none"===this.dragAction&&"editing"===this.currentShapeState&&(this.dragAction="stop-editing",this._exitEditingState(n))):(this.color=n.getColor("primary"),this.currentShape=o("Text",{x:t,y:e,text:this.text,color:this.color,font:this.font,v:1}),this.dragAction="place",this.currentShapeState="selected"),"none"===this.dragAction?void this.commit(n):(this.initialShapeBoundingRect=this.currentShape.getBoundingRect(n.ctx),this.dragOffset={x:t-this.initialShapeBoundingRect.x,y:e-this.initialShapeBoundingRect.y},this._setShapesInProgress(n),n.repaintLayer("main"))},e.prototype["continue"]=function(t,e,n){var r,i,o;if("none"!==this.dragAction){switch(r=this.initialShapeBoundingRect,o=r.x+r.width,i=r.y+r.height,this.dragAction){case"place":this.currentShape.x=t,this.currentShape.y=e,this.didDrag=!0;break;case"move":this.currentShape.x=t-this.dragOffset.x,this.currentShape.y=e-this.dragOffset.y,this.didDrag=!0;break;case"resizeBottomRight":this.currentShape.setSize(t-(this.dragOffset.x-this.initialShapeBoundingRect.width)-r.x,e-(this.dragOffset.y-this.initialShapeBoundingRect.height)-r.y);break;case"resizeTopLeft":this.currentShape.setSize(o-t+this.dragOffset.x,i-e+this.dragOffset.y),this.currentShape.setPosition(t-this.dragOffset.x,e-this.dragOffset.y);break;case"resizeBottomLeft":this.currentShape.setSize(o-t+this.dragOffset.x,e-(this.dragOffset.y-this.initialShapeBoundingRect.height)-r.y),this.currentShape.setPosition(t-this.dragOffset.x,this.currentShape.y);break;case"resizeTopRight":this.currentShape.setSize(t-(this.dragOffset.x-this.initialShapeBoundingRect.width)-r.x,i-e+this.dragOffset.y),this.currentShape.setPosition(this.currentShape.x,e-this.dragOffset.y)}return this._setShapesInProgress(n),n.repaintLayer("main"),this._updateInputEl(n)}},e.prototype.end=function(t,e,n){if(this.currentShape)return this.currentShape.setSize(this.currentShape.forcedWidth,0),"selected"===this.currentShapeState&&("place"===this.dragAction||"move"===this.dragAction&&!this.didDrag)&&this._enterEditingState(n),this._setShapesInProgress(n),n.repaintLayer("main"),this._updateInputEl(n)},e.prototype._enterEditingState=function(t){var e;if(this.currentShapeState="editing",this.inputEl)throw"State error";return this.inputEl=document.createElement("textarea"),this.inputEl.className="text-tool-input",this.inputEl.style.position="absolute",this.inputEl.style.transformOrigin="0px 0px",this.inputEl.style.backgroundColor="transparent",this.inputEl.style.border="none",this.inputEl.style.outline="none",this.inputEl.style.margin="0",this.inputEl.style.padding="4px",this.inputEl.style.zIndex="1000",this.inputEl.style.overflow="hidden",this.inputEl.style.resize="none",this.inputEl.value=this.currentShape.text,this.inputEl.addEventListener("mousedown",function(t){return t.stopPropagation()}),this.inputEl.addEventListener("touchstart",function(t){return t.stopPropagation()}),e=function(e){return function(n){return e.currentShape.setText(n.target.value),e.currentShape.enforceMaxBoundingRect(t),e._setShapesInProgress(t),t.repaintLayer("main"),e._updateInputEl(t),n.stopPropagation()}}(this),this.inputEl.addEventListener("keydown",function(e){return function(){return e._updateInputEl(t,!0)}}(this)),this.inputEl.addEventListener("keyup",e),this.inputEl.addEventListener("change",e),this._updateInputEl(t),t.containerEl.appendChild(this.inputEl),this.inputEl.focus(),this._setShapesInProgress(t)},e.prototype._exitEditingState=function(t){return this.currentShapeState="selected",t.containerEl.removeChild(this.inputEl),this.inputEl=null,this._setShapesInProgress(t),t.repaintLayer("main")},e.prototype._updateInputEl=function(t,e){var n,r;if(null==e&&(e=!1),this.inputEl)return n=this.currentShape.getBoundingRect(t.ctx,!0),this.inputEl.style.font=this.currentShape.font,this.inputEl.style.color=this.currentShape.color,this.inputEl.style.left=t.position.x/t.backingScale+n.x*t.scale-4+"px",this.inputEl.style.top=t.position.y/t.backingScale+n.y*t.scale-4+"px",e&&!this.currentShape.forcedWidth?this.inputEl.style.width=n.width+10+this.currentShape.renderer.emDashWidth+"px":this.inputEl.style.width=n.width+12+"px",e?this.inputEl.style.height=n.height+10+this.currentShape.renderer.metrics.leading+"px":this.inputEl.style.height=n.height+10+"px",r="scale("+t.scale+")",this.inputEl.style.transform=r,this.inputEl.style.webkitTransform=r,this.inputEl.style.MozTransform=r,this.inputEl.style.msTransform=r,this.inputEl.style.OTransform=r},e.prototype.optionsStyle="font",e}(i)},{"../core/shapes":14,"./base":31}],31:[function(t,e,n){var r,i,o,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;o={},o.Tool=r=function(){function t(){}return t.prototype.name=null,t.prototype.iconName=null,t.prototype.usesSimpleAPI=!0,t.prototype.begin=function(t,e,n){},t.prototype["continue"]=function(t,e,n){},t.prototype.end=function(t,e,n){},t.prototype.optionsStyle=null,t.prototype.didBecomeActive=function(t){},t.prototype.willBecomeInactive=function(t){},t}(),o.ToolWithStroke=i=function(t){function e(t){this.strokeWidth=t.opts.defaultStrokeWidth}return a(e,t),e.prototype.optionsStyle="stroke-width",e.prototype.didBecomeActive=function(t){var e;return e=[],this.unsubscribe=function(t){return function(){var t,n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(t());return i}}(this),e.push(t.on("setStrokeWidth",function(e){return function(n){return e.strokeWidth=n,t.trigger("toolDidUpdateOptions")}}(this)))},e.prototype.willBecomeInactive=function(t){return this.unsubscribe()},e}(r),e.exports=o},{}]},{},[19])(19)});